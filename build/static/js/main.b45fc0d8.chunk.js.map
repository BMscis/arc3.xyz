{"version":3,"sources":["lib/algorand.ts","lib/ipfs.ts","lib/validator.ts","lib/config.ts","lib/nft.ts","lib/metadata.ts","Minter.tsx","AlgorandWalletConnector.tsx","NFTViewer.tsx","Collection.tsx","NetworkSelector.tsx","App.tsx","index.tsx"],"names":["getClient","activeConf","algosdk","Algodv2","conf","algod","setOrUndef","addr","undefined","createToken","wallet","token","md","a","getDefaultAccount","getSuggested","suggested","create_txn","makeAssetCreateTxnWithSuggestedParamsFromObject","from","assetName","name","unitName","assetURL","url","assetMetadataHash","toHash","manager","reserve","clawback","freeze","total","Math","pow","decimals","defaultFrozen","suggestedParams","signTxn","create_txn_s","sendWait","result","rounds","getTransactionParams","do","txParams","lastRound","getToken","assetId","getAssetByID","getCollection","address","accountInformation","results","plist","push","Promise","all","assets","collectionRequests","map","NFT","fromToken","signed","client","sendRawTransaction","t","blob","txId","waitForConfirmation","console","error","timeout","Error","status","startround","currentround","pendingTransactionInformation","pending","length","statusAfterBlock","putToIPFS","file","storage","Web3Storage","storageToken","put","wrapWithDirectory","imgAdded","image","ipfsURL","toFile","getMimeTypeFromIpfs","req","Request","method","fetch","resp","headers","get","getMetaFromIpfs","body","text","parsed","JSON","parse","Metadata","validators","nft","urlMimeType","JSON_TYPE","metadataHash","Buffer","metadata","toString","validArc3","validateArc3","tests","k","pass","require","getAddrUrl","idx","blockExplorer","getAsaUrl","id","activeConfKey","sessionGetActiveConf","ac","sessionStorage","getItem","parseInt","sessionSetActiveConf","setItem","ARC3_URL_SUFFIX","METADATA_FILE","asaURL","cid","resolveProtocol","endsWith","slice","chunks","split","ipfsGateway","imageIntegrity","arrayBuffer","buff","bytes","Uint8Array","hash","sha256","digest","Token","creator","this","p","params","index","substring","asset_id","fromAssetId","fromParams","omitRawAndEmpty","v","args","_raw","description","image_integrity","image_mimetype","background_color","external_url","external_url_integrity","external_url_mimetype","animation_url","animation_url_integrity","animation_url_mimetype","extra_metadata","localization","properties","Object","assign","hasOwnProperty","create","update","md_blob","Blob","type","File","stringify","Minter","props","history","useHistory","React","meta","setMeta","loading","setLoading","imgSrc","setImgSrc","fileObj","setFileObj","extraProps","setExtraProps","extraPropsVisible","setExtraPropsVisible","extraParamsVisible","setExtraParamsVisible","setCID","isMinting","setIsMinting","setToken","captureMetadata","handleSetTokenParams","e","tgt","target","value","checked","handleExtraPropUpdate","dataset","handleSetMyAddress","label","sw","alert","eprops","reduce","ep","integ","className","elevation","Elevation","TWO","Uploader","setFile","reader","FileReader","onload","readAsDataURL","size","helperText","labelFor","labelInfo","placeholder","onChange","rows","cols","event","onClick","minimal","outlined","large","isOpen","inline","defaultValue","min","max","fill","onValueChange","rightElement","intent","icon","splice","handleExtraPropRemove","rightIcon","MintDialog","handleSetNFT","handleCancelMint","disabled","onInputChange","stopPropagation","preventDefault","files","item","alt","src","isLoading","setIsLoading","title","Classes","DIALOG_BODY","DIALOG_FOOTER","DIALOG_FOOTER_ACTIONS","AlgorandWalletConnector","selectorOpen","setSelectorOpen","sessionWallet","updateWallet","handleSelectedWallet","choice","currentTarget","allowedWallets","disconnect","SessionWallet","network","permissionCallback","connect","interval","connected","then","success","setInterval","clearInterval","walletOptions","entries","img","darkMode","displayName","onClose","addr_list","accts","substr","setAccountIndex","iconProps","accountIndex","NFTViewer","useParams","setNFT","loaded","setLoaded","subscribed","imgURL","mdProps","language","style","docco","wrapLongLines","arc3Invalids","test","rel","href","THREE","Collection","collection","setCollection","nfts","NetworkSelector","network_list","cfg","selectNetwork","App","useState","setActiveConf","setSessionWallet","accountList","setAccounts","setConnected","collectionLink","Group","align","Alignment","LEFT","Heading","Divider","RIGHT","exact","path","children","createBrowserHistory","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"8RAMA,SAASA,EAAUC,GACjB,OAAO,IAAIC,IAAQC,QAAQ,GAAIC,IAAKH,GAAYI,MAAO,IAIzD,SAASC,EAAWC,GAClB,MAAc,KAAPA,OAAUC,EAAUD,EAGtB,SAAeE,EAAtB,wC,4CAAO,WAA2BC,EAAgBT,EAAoBU,EAAcC,GAA7E,2BAAAC,EAAA,6DACGN,EAAYG,EAAOI,oBADtB,SAEqBC,EAAad,EAAY,IAF9C,cAEGe,EAFH,OAIGC,EAAcC,0DAAgD,CAChEC,KAAMZ,EACNa,UAAWR,EAAGS,KACdC,SAAUV,EAAGU,SACbC,SAAUZ,EAAMa,IAChBC,kBAAmBb,EAAGc,SACtBC,QAASrB,EAAWK,EAAMgB,SAC1BC,QAAStB,EAAWK,EAAMiB,SAC1BC,SAAUvB,EAAWK,EAAMkB,UAC3BC,OAAQxB,EAAWK,EAAMmB,QACzBC,MAAOC,KAAKC,IAAI,GAAItB,EAAMuB,UAC1BA,SAAUvB,EAAMuB,SAChBC,cAAexB,EAAMwB,cACrBC,gBAAiBpB,IAjBlB,SAoB2BN,EAAO2B,QAAQ,CAACpB,IApB3C,0CAoBIqB,EApBJ,eAsBkBC,EAAStC,EAAY,CAACqC,IAtBxC,eAsBGE,EAtBH,yBAuBIA,EAAO,gBAvBX,6C,sBA0BA,SAAezB,EAAtB,oC,4CAAO,WAA4Bd,EAAoBwC,GAAhD,eAAA5B,EAAA,sEACoBb,EAAUC,GAAYyC,uBAAuBC,KADjE,cACGC,EADH,oDAESA,GAFT,IAEmBC,UAAWD,EAAQ,WAAiBH,KAFvD,4C,sBAKA,SAAeK,EAAtB,oC,4CAAO,WAAwB7C,EAAoB8C,GAA5C,SAAAlC,EAAA,sEACQb,EAAUC,GAAY+C,aAAaD,GAASJ,KADpD,oF,sBAIA,SAAeM,EAAtB,oC,4CAAO,WAA6BhD,EAAoBiD,GAAjD,QAAArC,EAAA,aAAAA,EAAA,sEACiBb,EAAUC,GAAYkD,mBAAmBD,GAASP,KADnE,OAIL,IAAU9B,KAHJuC,EADD,OAGCC,EAAQ,GACCD,EAAO,OACjBA,EAAO,OAAWvC,GAAlB,OAA+B,GAChCwC,EAAMC,KAAKR,EAAS7C,EAAYmD,EAAO,OAAWvC,GAAG,cANpD,gBASgB0C,QAAQC,IAAIH,GAT5B,cASCI,EATD,OAUCC,EAAqBD,EAAOE,KAAI,SAAC9C,GAAM,OAAO+C,IAAIC,UAAU5D,EAAYY,MAVzE,kBAWE0C,QAAQC,IAAIE,IAXd,6C,sBAcA,SAAenB,EAAtB,oC,4CAAO,WAAwBtC,EAAoB6D,GAA5C,qBAAAjD,EAAA,6DACGkD,EAAS/D,EAAUC,GADtB,kBAGsB8D,EAAOC,mBAAmBF,EAAOH,KAAI,SAACM,GAAK,OAAOA,EAAEC,SAAQvB,KAHlF,uBAGQwB,EAHR,EAGQA,KAHR,SAIsBC,EAAoBL,EAAQI,EAAM,GAJxD,cAIO3B,EAJP,yBAKQA,GALR,kCAOC6B,QAAQC,MAAR,MAPD,sCAUI9D,GAVJ,2D,+BAaQ4D,E,kFAAf,WAAmCL,EAAQI,EAAMI,GAAjD,qBAAA1D,EAAA,2DACkB,MAAVkD,GAA0B,MAARI,GAAgBI,EAAU,GADpD,sBAEY,IAAIC,MAAM,kBAFtB,uBAKyBT,EAAOU,SAAS9B,KALzC,UAM0B,qBADhB8B,EALV,8BAOY,IAAID,MAAM,6BAPtB,OASUE,EAAaD,EAAO,cAAgB,EACtCE,EAAeD,EAVvB,YAaWC,EAAeD,EAAaH,GAbvC,kCAc4BR,EACnBa,8BAA8BT,GAC9BxB,KAhBT,gBAkBsBnC,KAJVqE,EAdZ,8BAmB4C,OAA/BA,EAAQ,oBAA+BA,EAAQ,mBAAqB,GAnBjF,0CAoBiBA,GApBjB,aAsBsC,MAAzBA,EAAQ,eAAyBA,EAAQ,cAAcC,OAAS,GAtB7E,uBAuBgB,IAAIN,MAAJ,yCAA6CK,EAAQ,gBAvBrE,yBA0BYd,EAAOgB,iBAAiBJ,GAAchC,KA1BlD,QA2BMgC,GAAgB,EA3BtB,6BA+BU,IAAIH,MAAJ,0CAA6CD,EAA7C,aA/BV,6C,mOChEO,SAAeS,EAAtB,sC,4CAAO,WAAyB/E,EAAoBgF,EAAYrE,GAAzD,iBAAAC,EAAA,6DACGqE,EAAU,IAAIC,IAAY,CAACxE,MAAOP,IAAKH,GAAYmF,eADtD,kBAGsBF,EAAQG,IAAI,CAACJ,GAAO,CAACK,mBAAmB,IAH9D,cAGKC,EAHL,OAID3E,EAAG4E,MAAQC,YAAQF,GAJlB,SAMYL,EAAQG,IAAI,CAACzE,EAAG8E,UAAW,CAACJ,mBAAmB,IAN3D,0EAQajB,QAAQC,MAAR,MARb,iCASI,IATJ,2D,sBAaA,SAAeqB,EAAtB,kC,4CAAO,WAAmCnE,GAAnC,iBAAAX,EAAA,6DACG+E,EAAM,IAAIC,QAAQrE,EAAK,CAAEsE,OAAO,SADnC,SAEgBC,MAAMH,GAFtB,cAEGI,EAFH,yBAGIA,EAAKC,QAAQC,IAAI,iBAHrB,4C,sBAOA,SAAeC,EAAtB,kC,4CAAO,WAA+B3E,GAA/B,uBAAAX,EAAA,6DACG+E,EAAM,IAAIC,QAAQrE,GADrB,SAEgBuE,MAAMH,GAFtB,cAEGI,EAFH,gBAGgBA,EAAK9B,OAHrB,cAGGkC,EAHH,gBAIgBA,EAAKC,OAJrB,cAIGA,EAJH,OAKGC,EAASC,KAAKC,MAAMH,GALvB,kBAMI,IAAII,IAAJ,aAAc,KAAOJ,GAASC,KANlC,6C,0DCjCP,4FAiBA,IAAMI,EAAa,CACf,yBAhBJ,SAAeC,GACX,OAAOA,EAAIC,cAAgBC,KAgB3B,wBAbJ,SAAgBF,GACZ,OAAOA,EAAIhG,MAAMmG,eAAiBC,EAAO5F,KAAKwF,EAAIK,SAAStF,UAAUuF,SAAS,WAa9E,oBAVJ,SAAeN,GACX,OAAQA,EAAIhG,MAAMoB,MAAQC,KAAKC,IAAI,GAAI0E,EAAIhG,MAAMuB,YAAe,IAa7D,SAASgF,EAAUP,GACtB,OAAoC,IAA7BQ,EAAaR,GAAK7B,OAQtB,SAASqC,EAAaR,GACzB,IAAMS,EAAQ,GACd,IAAI,IAAMC,KAAKX,EACXU,EAAM9D,KAAK,CAACjC,KAAKgG,EAAEC,KAAKZ,EAAWW,GAAGV,KAE1C,OAAOS,K,yDC9BX,0KAAO,IAAMhH,EAAOmH,EAAQ,KAErB,SAASC,EAAWC,EAAalH,GACpC,OAAOH,EAAKqH,GAAKC,cAAgB,WAAanH,EAE3C,SAASoH,EAAUF,EAAaG,GACnC,OAAOxH,EAAKqH,GAAKC,cAAgB,SAAWE,EAGhD,IAAMC,EAAgB,cACf,SAASC,IACZ,IAAMC,EAAKC,eAAeC,QAAQJ,GAClC,YAAUrH,IAAPuH,GAA2B,OAAPA,EAAoB,EACpCG,SAASH,GAGb,SAASI,EAAqBJ,GACjCC,eAAeI,QAAQP,EAAeE,EAAGd,c,gXCRhCoB,EAAkB,QAClBC,EAAgB,gBAChBzB,EAAY,mBAElB,SAAS0B,EAAOC,GAAuB,OAAO/C,EAAQ+C,GAAKH,EAC3D,SAAS5C,EAAQ+C,GAAuB,MAAO,UAAUA,EAGzD,SAASC,EAAgBxI,EAAoBuB,GAE7CA,EAAIkH,SAASL,KACZ7G,EAAMA,EAAImH,MAAM,EAAGnH,EAAIsD,OAAOuD,EAAgBvD,SAElD,IAAM8D,EAASpH,EAAIqH,MAAM,OAGzB,GAAGD,EAAO9D,OAAS,EAAI,OAAOtD,EAG9B,OAAOoH,EAAO,IACV,IAAK,OACD,OAAOxI,IAAKH,GAAY6I,YAAcF,EAAO,GACjD,IAAK,QACD,OAAOpH,EAIf,OAAOA,EAGJ,SAAeuH,EAAtB,kC,4CAAO,WAA8B9D,GAA9B,mBAAApE,EAAA,sEACgBoE,EAAK+D,cADrB,cACGC,EADH,OAEGC,EAAQ,IAAIC,WAAWF,GACvBG,EAAO,IAAID,WAAWE,SAAOC,OAAOJ,IAHvC,kBAII,UAAUnC,EAAO5F,KAAKiI,GAAMnC,SAAS,WAJzC,4C,sBAOA,IAAMsC,EAAb,WAqBI,WAAYtF,GAAS,yBApBrB2D,QAoBoB,OAlBpBvG,UAkBoB,OAjBpBC,cAiBoB,OAhBpBE,SAgBoB,OAdpBsF,kBAcoB,OAZpB/E,WAYoB,OAXpBG,cAWoB,OATpBsH,aASoB,OAPpB7H,aAOoB,OANpBC,aAMoB,OALpBC,cAKoB,OAJpBC,YAIoB,OAFpBK,mBAEoB,EACjBsH,KAAKpI,KAAkB4C,EAAE5C,MAAQ,GACjCoI,KAAKnI,SAAkB2C,EAAE3C,UAAY,GACrCmI,KAAKjI,IAAkByC,EAAEzC,KAAO,GAEhCiI,KAAK3C,aAAkB7C,EAAE6C,cAAgB,GAEzC2C,KAAK1H,MAAkBkC,EAAElC,OAAS,EAClC0H,KAAKvH,SAAkB+B,EAAE/B,UAAY,EAErCuH,KAAKD,QAAkBvF,EAAEuF,SAAW,GAEpCC,KAAK9H,QAAkBsC,EAAEtC,SAAW,GACpC8H,KAAK7H,QAAkBqC,EAAErC,SAAW,GACpC6H,KAAK5H,SAAkBoC,EAAEpC,UAAY,GACrC4H,KAAK3H,OAAkBmC,EAAEnC,QAAU,GAEnC2H,KAAKtH,cAAkB8B,EAAE9B,gBAAiB,EAtCjD,mDAyCI,SAAkB8B,GACd,IAAMyF,EAAKzF,EAAE0F,OACb,MAAO,CACH/B,GAAkB3D,EAAE2F,MACpBvI,KAAkBqI,EAAErI,MAAQ,GAC5BC,SAAkBoI,EAAE,cAAgB,GACpClI,IAAkBkI,EAAElI,KAAO,GAC3BsF,aAAkB4C,EAAE,kBAAoB,GACxC3H,MAAkB2H,EAAE3H,OAAS,EAC7BG,SAAkBwH,EAAExH,UAAY,EAChCsH,QAAkBE,EAAEF,SAAW,GAC/B7H,QAAkB+H,EAAE/H,SAAW,GAC/BC,QAAkB8H,EAAE9H,SAAW,GAC/BC,SAAkB6H,EAAE7H,UAAY,GAChCC,OAAkB4H,EAAE5H,QAAU,GAC9BK,cAAkBuH,EAAE,oBAAqB,OAxDrD,KA+Da9F,EAAb,WAMI,WAAYhD,EAAcD,EAAeiG,GAAuB,yBALhEjG,WAK+D,OAJ/DqG,cAI+D,OAF/DJ,iBAE+D,EAC3D6C,KAAKzC,SAAWpG,EAChB6I,KAAK9I,MAAQA,EACb8I,KAAK7C,YAAcA,EAT3B,0CAwCI,SAAO3G,GAEH,IAAMuB,EAAMiH,EAAgBxI,EAAYwJ,KAAKzC,SAASxB,OAGtD,OAAGhE,IAAQiI,KAAKzC,SAASxB,MAAchE,EAIpCiI,KAAK9I,MAAMa,IAAIkH,SAASJ,GAEhBG,EAAgBxI,EADXwJ,KAAK9I,MAAMa,IAAIqI,UAAU,EAAEJ,KAAK9I,MAAMa,IAAIsD,OAAOwD,EAAcxD,SACnC2E,KAAKzC,SAASxB,MAInDhE,KAvDf,4DAYI,WAAoBd,EAAgBT,EAAmBU,EAAcC,EAAc4H,GAAnF,8EACI7H,EAAMa,IAAM+G,EAAOC,GADvB,SAE2B/H,YAAYC,EAAQT,EAAYU,EAAOC,GAFlE,cAEUkJ,EAFV,gBAGiBlG,EAAImG,YAAY9J,EAAY6J,GAH7C,mFAZJ,+HAkBI,WAAyB7J,EAAoB8C,GAA7C,6EACWa,EADX,KACyB3D,EADzB,SAC2C6C,YAAS7C,EAAY8C,GADhE,iDACec,UADf,iEAlBJ,uHAsBI,WAAuB5D,EAAoBgE,GAA3C,kFACUtD,EAAQ4I,EAAMS,WAAW/F,GACzBzC,EAAMiH,EAAgBxI,EAAYU,EAAMa,KAFlD,SAO8BmE,YAAoBnE,GAPlD,OAOUoF,EAPV,YASWA,EATX,cAUaC,EAVb,8BAWuBjD,EAXvB,UAWiCuC,YAAgB3E,GAXjD,gCAWuDb,EAXvD,KAW8DiG,EAX9D,6EAcW,IAAIhD,EAAI6C,IAAS5C,UAAUlD,GAAQA,EAAOiG,IAdrD,4CAtBJ,kE,ktCClGA,SAASqD,EAAgB5C,EAAE6C,GACvB,GAAS,SAAN7C,GACM,KAAN6C,EACH,OAAOA,EAGJ,IAAMzD,EAAb,WA2BI,aAA6B,IAAjB0D,EAAgB,uDAAJ,GAAI,yBA1B5BC,UAAe5J,EA0Ba,KAxB5Ba,KAAe,GAwBa,KAvB5BgJ,YAAsB,GAuBM,KArB5B7E,MAAgB,GAqBY,KApB5BtD,SAAoB,EAoBQ,KAnB5BZ,SAAoB,GAmBQ,KAlB5BgJ,gBAA2B,GAkBC,KAjB5BC,eAA0B,GAiBE,KAf5BC,iBAA4B,GAeA,KAd5BC,aAAwB,GAcI,KAb5BC,uBAAkC,GAaN,KAZ5BC,sBAAiC,GAYL,KAV5BC,cAAyB,GAUG,KAT5BC,wBAAmC,GASP,KAR5BC,uBAAkC,GAQN,KAN5BC,eAA0B,GAME,KAJ5BC,kBAI4B,OAF5BC,gBAE4B,EAAEC,OAAOC,OAAO1B,KAAMU,GA3BtD,0CA6BI,WACOV,KAAK2B,eAAe,uBAKN5K,IAAdiJ,KAAKW,OACJX,KAAKW,KAAOX,KAAKxC,YAErB,IAAMmC,EAAOC,SAAOgC,SAEpB,OADAjC,EAAKkC,OAAO7B,KAAKW,MACV,IAAIjB,WAAWC,EAAKE,YAxCnC,oBA2CI,WACI,IAAMiC,EAAU,IAAIC,KAAK,CAAC/B,KAAKxC,YAAa,CAAEwE,KAAM5E,MACpD,OAAO,IAAI6E,KAAK,CAACH,GAAUjD,OA7CnC,sBAgDI,WACI,OAAO/B,KAAKoF,UAAL,eAAmBlC,MAAOQ,MAjDzC,wBAoDI,SAAiBhG,GACb,OAAO,IAAIwC,EAAS,CAAEpF,KAAK4C,EAAE5C,KAAMmE,MAAOvB,EAAEzC,IAAKU,SAAU+B,EAAE/B,eArDrE,M,6NCZO,SAAS0J,EAAOC,GAEnB,IAAMC,EAAUC,cAEhB,EAAsCC,WAAe,IAAIvF,KAAzD,mBAAOwF,EAAP,KAAaC,EAAb,KACA,EAAsCF,YAAe,GAArD,mBAAOG,EAAP,KAAgBC,EAAhB,KACA,EAAsCJ,aAAtC,mBAAOK,EAAP,KAAeC,EAAf,KACA,EAAsCN,aAAtC,mBAAOO,EAAP,KAAgBC,EAAhB,KAEA,EAAsCR,WAAe,IAArD,mBAAOS,EAAP,KAAmBC,EAAnB,KACA,EAAkDV,YAAe,GAAjE,mBAAOW,EAAP,KAA0BC,EAA1B,KAEA,EAAoDZ,YAAe,GAAnE,mBAAOa,EAAP,KAA2BC,EAA3B,KAGA,EAAsCd,WAAe,IAArD,mBAAOxD,EAAP,KAAYuE,EAAZ,KACA,EAAsCf,YAAe,GAArD,mBAAOgB,EAAP,KAAkBC,EAAlB,KAEA,GAAsCjB,WAAe,IAAIzC,IAAM,KAA/D,qBAAO5I,GAAP,MAAcuM,GAAd,MAlBsC,8CAsCtC,8BAAArM,EAAA,6DACIuL,GAAW,GADf,SAGqBe,KAHrB,cAGUvM,EAHV,OAIIsL,EAAQtL,GAJZ,SAMsBoE,YAAU6G,EAAM5L,WAAYsM,EAAS3L,GAN3D,OAMU4H,EANV,OAOIuE,EAAOvE,GAEPyE,GAAa,GATjB,6CAtCsC,sBA0DtC,SAASG,GAAqBC,GAC1B,IAAMC,EAAMD,EAAEE,OACRlM,EAAOgM,EAAEE,OAAO3F,GAChB4F,EAAqB,aAAbF,EAAI7B,KAAsB6B,EAAIG,QAASH,EAAIE,MACzDN,IAAS,SAACvM,GAAU,OAAO,IAAI4I,IAAJ,2BAAc5I,GAAd,kBAAsBU,EAAMmM,QAe3D,SAASE,GAAsBL,GAC3B,IAAM5F,EAAIS,SAASmF,EAAEE,OAAOI,QAAQ/F,IACjCyF,EAAEE,OAAO3F,GAAa6E,EAAWhF,GAAK4F,EAAEE,OAAO3F,IAAIyF,EAAEE,OAAOC,MAE/Dd,EAAc,YAAID,IAItB,SAASmB,GAAmBC,GACxB,OAAO,SAACR,GACJH,IAAS,SAACvM,GACN,IAAMJ,EAAOsL,EAAMiC,GAAGhN,oBAEtB,MADY,KAATP,GAAawN,MAAM,0DACf,IAAIxE,IAAJ,2BAAc5I,GAAd,kBAAsBkN,EAAQtN,SA1FX,SAgGvB4M,KAhGuB,8EAgGtC,8BAAAtM,EAAA,6DACUmN,EAASvB,EAAWwB,QAAO,SAACzK,EAAK0K,GAAO,OAAO,2BAAI1K,GAAX,kBAAiB0K,EAAG7M,KAAM6M,EAAGV,UAAU,IADzF,SAEwBzE,YAAewD,GAFvC,cAEU4B,EAFV,yBAGW,IAAI1H,IAAS,CAChBpF,KAAgBV,GAAMU,KACtBC,SAAgBX,GAAMW,SACtBY,SAAgBvB,GAAMuB,SACtBmI,YAAgB4B,EAAK5B,YACrBE,eAAgB0B,EAAK1B,eACrBD,gBAAgB6D,EAChBlD,WAAW,2BAAU+C,GAAW/B,EAAKhB,eAV7C,4CAhGsC,sBA8GtC,OACI,sBAAKmD,UAAU,YAAf,UACI,eAAC,IAAD,CAAMC,UAAWC,IAAUC,IAAKH,UAAU,YAA1C,UACI,cAACI,EAAD,aACInC,OAAQA,EACRoC,QA/FhB,SAAiBxJ,GACbuH,EAAWvH,GAEX,IAAMyJ,EAAS,IAAIC,WACnBD,EAAOE,OAAS,SAACvB,GAAcf,EAAUe,EAAEE,OAAO/K,SAClDkM,EAAOG,cAAc5J,GAErBiH,GAAQ,SAACD,GACL,OAAO,IAAIxF,IAAJ,2BACAwF,GADA,IAEHzG,MAAOP,EAAK5D,KACZkJ,eAAgBtF,EAAKwG,KACrBR,WAAW,2BAAIgB,EAAKhB,YAAV,IAAsB6D,KAAK7J,EAAK6J,eAoFlC7C,IAER,sBAAKmC,UAAU,YAAf,UACI,cAAC,IAAD,CACIW,WAAW,0BACXlB,MAAM,OACNmB,SAAS,OACTC,UAAU,aAJd,SAKI,cAAC,IAAD,CACI5N,KAAK,OACL6N,YAAY,OACZd,UAAU,uDACVe,SAAU/B,GACV3B,KAAK,OACL7D,GAAG,OACH4F,MAAO7M,GAAMU,SAErB,cAAC,IAAD,CACI0N,WAAW,gCACXlB,MAAM,YACNmB,SAAS,WACTC,UAAU,aAJd,SAKI,cAAC,IAAD,CACI5N,KAAK,WACL6N,YAAY,YACZd,UAAU,uDACVe,SAAU/B,GACV3B,KAAK,OACL7D,GAAG,WACH4F,MAAO7M,GAAMW,gBAIzB,qBAAK8M,UAAU,YAAf,SACI,cAAC,IAAD,CACIW,WAAW,8BACXlB,MAAM,cACNmB,SAAS,cACTC,UAAU,aAJd,SAKI,0BACIG,KAAM,GACNC,KAAM,GACNH,YAAY,cACZd,UAAU,+CACVe,SA/FxB,SAA0BG,GACtB,IAAM/B,EAAS+B,EAAM/B,OACflM,EAAOkM,EAAOlM,KACdmM,EAAwB,aAAhBD,EAAO9B,KAAsB8B,EAAOE,QAAUF,EAAOC,MACnEtB,GAAQ,SAACD,GAAS,OAAQ,IAAIxF,IAAJ,2BAAiBwF,GAAjB,kBAAwB5K,EAAMmM,SA4FpCnM,KAAK,cACLuG,GAAG,cACH4F,MAAOvB,EAAK5B,kBAIxB,sBAAK+D,UAAU,iCAAf,UACI,cAAC,IAAD,CACImB,QAhGpB,WAAkCzC,GAAuBD,IAiGrC2C,SAAS,EACTC,UAAU,EACVC,OAAO,EACPrJ,KAAMwG,EAAmB,wBAAwB,0BAErD,cAAC,IAAD,CAAU8C,OAAQ9C,EAAlB,SACI,sBAAKuB,UAAU,6BAAf,UAEA,cAAC,IAAD,CACIwB,QAAQ,EACRb,WAAW,iDACXlB,MAAM,WAAWmB,SAAS,WAH9B,SAII,cAAC,IAAD,CACIa,aAAc,EAAGC,IAAK,EAAGC,IAAK,GAC9B1O,KAAK,WACLuG,GAAG,WACHoI,MAAM,EACNC,cAlI5B,SAA8B/F,GAAYgD,IAAS,SAACvM,GAAU,OAAO,IAAI4I,IAAJ,2BAAc5I,GAAd,IAAqB,SAAWuJ,aAqIjF,cAAC,IAAD,CACI0F,QAAQ,EACR/B,MAAM,iBAAiBmB,SAAS,iBAFpC,SAGI,cAAC,IAAD,CAAQU,OAAO,EAAMrO,KAAK,iBAAiBuG,GAAG,gBAAiBuH,SAAU/B,OAG7E,cAAC,IAAD,CACIwC,QAAQ,EACRb,WAAW,qCACXlB,MAAM,kBAAkBmB,SAAS,UAHrC,SAII,cAAC,IAAD,CACAkB,aAAc,cAAC,IAAD,CAAQV,SAAS,EAAMnJ,KAAK,KAAKkJ,QAAS3B,GAAmB,aAC3EJ,MAAO7M,GAAMgB,QACbN,KAAK,UAAUuG,GAAG,UAAY6D,KAAK,OAAO0D,SAAU/B,OAGxD,cAAC,IAAD,CACIwC,QAAQ,EACRb,WAAW,qCACXlB,MAAM,kBAAkBmB,SAAS,UAHrC,SAII,cAAC,IAAD,CACAkB,aAAc,cAAC,IAAD,CAAQV,SAAS,EAAMnJ,KAAK,KAAKkJ,QAAS3B,GAAmB,aAC3EJ,MAAO7M,GAAMiB,QACbP,KAAK,UAAUuG,GAAG,UAAY6D,KAAK,OAAQ0D,SAAU/B,OAGzD,cAAC,IAAD,CACIwC,QAAQ,EACRb,WAAW,sCACXlB,MAAM,mBAAmBmB,SAAS,WAHtC,SAII,cAAC,IAAD,CACAkB,aAAc,cAAC,IAAD,CAAQV,SAAS,EAAMnJ,KAAK,KAAKkJ,QAAS3B,GAAmB,cAC3EJ,MAAO7M,GAAMkB,SACbR,KAAK,WAAWuG,GAAG,WAAa6D,KAAK,OAAQ0D,SAAU/B,OAG3D,cAAC,IAAD,CACIwC,QAAQ,EACRb,WAAW,oCACXlB,MAAM,iBAAiBmB,SAAS,SAHpC,SAII,cAAC,IAAD,CACAkB,aAAc,cAAC,IAAD,CAAQV,SAAS,EAAMnJ,KAAK,KAAKkJ,QAAS3B,GAAmB,YAAeJ,MAAO7M,GAAMmB,OACvGT,KAAK,SAASuG,GAAG,SAAU6D,KAAK,OAAQ0D,SAAU/B,eAO9D,sBAAKgB,UAAU,gCAAf,UACI,cAAC,IAAD,CACImB,QAzKpB,WAAiC3C,GAAsBD,IA0KnC6C,SAAS,EACTC,UAAU,EACVC,OAAO,EACPrJ,KAAMsG,EAAkB,mBAAmB,qBAE/C,eAAC,IAAD,CAAUgD,OAAQhD,EAAmByB,UAAU,sBAA/C,UACI,2DACA,oBAAIA,UAAU,kBAAd,SAEI3B,EAAW9I,KAAI,SAACkI,EAAOpE,GACnB,OACA,oBAAI2G,UAAU,kBAAd,SACI,sBAAKA,UAAU,uBAAf,UACI,cAAC,IAAD,CACIxG,GAAG,OACH,UAASH,EACTpG,KAAK,OACLmM,MAAO3B,EAAMxK,KACb8N,SAAUzB,GACVU,UAAU,0DACd,cAAC,IAAD,CACIxG,GAAG,QACHvG,KAAK,QACL,UAASoG,EACT+F,MAAO3B,EAAM2B,MACb2B,SAAUzB,GACVU,UAAU,0DACd,cAAC,IAAD,CAAQoB,SAAS,EAAMW,OAAO,SAASC,KAAK,QAAQb,QAAS,YAnMjG,SAA+B9H,GAAegF,EAAW4D,OAAO5I,EAAK,GAAIiF,EAAc,YAAID,IAmMY6D,CAAsB7I,UAhB5DA,QAuB7C,cAAC,IAAD,CAAQuI,MAAM,EAAMI,KAAK,OAAOD,OAAO,UAAUX,SAAS,EAAMD,QAzMpF,WAAgC7C,EAAc,GAAD,mBAAKD,GAAL,CACX,CAAEpL,KAAK,GAAImM,MAAO,QAwM6DY,UAAU,yBAI/G,qBAAKA,UAAU,gCAIf,qBAAKA,UAAU,2BAAf,SACI,cAAC,IAAD,CAAQjC,QAASA,EACboD,QA9RkB,4CA+RlBgB,UAAU,QACVb,OAAO,EACPF,SAAS,EACTC,UAAU,EACVU,OAAO,UACP9J,KAAK,cAGjB,cAACmK,EAAD,CACIvQ,WAAY4L,EAAM5L,WAClBU,MAAOA,GACPqM,UAAWA,EACXxE,IAAKA,EACL5H,GAAIqL,EACJ6B,GAAIjC,EAAMiC,GACV2C,aAvPZ,SAAsB9J,GAAW,OAAOmF,EAAQxI,KAAK,QAAQqD,EAAIhG,MAAMiH,KAwP3D8I,iBA7PZ,WACIzD,GAAa,GACbb,GAAW,SAuQnB,SAASoC,EAAS3C,GAOd,YAAqBrL,IAAjBqL,EAAMQ,QAAyC,KAAjBR,EAAMQ,OACpC,qBAAK+B,UAAU,YAAf,SACI,qBAAKA,UAAU,wBAAf,SACI,cAAC,IAAD,CAAWsB,OAAO,EAAMiB,UAAU,EAAOtK,KAAK,iBAAiBuK,cAT3E,SAAqBtB,GACjBA,EAAMuB,kBACNvB,EAAMwB,iBACNjF,EAAM4C,QAAQa,EAAM/B,OAAOwD,MAAMC,KAAK,WAatC,qBAAK5C,UAAU,YAAf,SACI,qBAAKA,UAAU,wBAAf,SACI,qBAAKxG,GAAG,eAAeqJ,IAAI,MAAMC,IAAKrF,EAAMQ,aAiB5D,SAASmE,EAAW3E,GAChB,MAAkCG,YAAe,GAAjD,mBAAOmF,EAAP,KAAkBC,EAAlB,KADuC,4CAQvC,4BAAAvQ,EAAA,sEAEQuQ,GAAa,GAFrB,SAG0BxN,IAAIyH,OAAOQ,EAAMiC,GAAGpN,OAAQmL,EAAM5L,WAAY4L,EAAMlL,MAAOkL,EAAMjL,GAAIiL,EAAMrD,KAHrG,OAGc7B,EAHd,OAIQyK,GAAa,GACbvF,EAAM4E,aAAa9J,GAL3B,gDAOOoH,MAAM,yBAAyB,EAAzB,IACNqD,GAAa,GACbvF,EAAM6E,mBATb,0DARuC,sBAqBvC,OACI,eAAC,IAAD,CAAQf,OAAQ9D,EAAMmB,UAAWqE,MAAM,UAAvC,UACI,sBAAKjD,UAAWkD,IAAQC,YAAxB,UACI,uDAA0B1F,EAAMjL,GAAG4E,MAAnC,OACA,8DAEJ,qBAAK4I,UAAWkD,IAAQE,cAAxB,SACI,sBAAKpD,UAAWkD,IAAQG,sBAAxB,UACI,cAAC,IAAD,CAAQtF,QAASgF,EAAW5B,QA1B5C,WACI6B,GAAa,GACbvF,EAAM6E,oBAwBM,oBACA,cAAC,IAAD,CAAQvE,QAASgF,EAAW5B,QA9BL,2CA8BvB,0BC1XL,SAASmC,EAAwB7F,GAE5C,MAAwCG,YAAe,GAAvD,mBAAO2F,EAAP,KAAqBC,EAArB,KAEOC,EAA8BhG,EAA9BgG,cAAcC,EAAgBjG,EAAhBiG,aAJ4D,SAoClEC,EApCkE,8EAoCjF,WAAoC1E,GAApC,iBAAAxM,EAAA,0DACUmR,EAAS3E,EAAE4E,cAAcrK,MAEhBsK,iBAHnB,4BAI0C1R,IAA/BqL,EAAMgG,cAAcnR,QAAsBmL,EAAMgG,cAAcM,aAJzE,kBAKeP,GAAgB,IAL/B,cAQU9D,EAAK,IAAIsE,gBAAcvG,EAAMgG,cAAcQ,QAASxG,EAAMgG,cAAcS,mBAAoBN,GARtG,SAUclE,EAAGyE,UAVjB,iCAWQzE,EAAGqE,aAXX,OAcItG,EAAMiG,aAAahE,GAEnB8D,GAAgB,GAhBpB,6CApCiF,sBAKjF5F,aAAgB,WAGZ,IAAIwG,EAFJ,IAAGX,EAAcY,YAkBjB,OAfAZ,EAAcU,UAAUG,MAAK,SAACC,GACtBA,IAKJH,EAAWI,aAAY,WAChBf,EAAcY,cACbI,cAAcL,GACdV,EAAaD,MAElB,SAIA,WAAMgB,cAAcL,MAE5B,CAACX,EAAeC,IAmCnB,IADA,IAAMgB,EAAgB,GACtB,MAAmB5H,OAAO6H,QAAQb,kBAAlC,eAAkD,CAA9C,0BAAO7K,EAAP,KAAS6C,EAAT,KACA4I,EAAcxP,KACd,6BACI,cAAC,IAAD,CAAQsE,GAAIP,EACRqI,OAAO,EACPM,MAAM,EACNR,SAAS,EACTC,UAAU,EACVF,QAASwC,EALb,SAOI,sBAAK3D,UAAU,gBAAf,UACI,qBAAK6C,IAAI,kBAAkB7C,UAAU,kBAAkB8C,IAAOhH,EAAE8I,IAAInH,EAAMoH,YAC1E,6BAAK/I,EAAEgJ,sBAVV7L,IAiBb,IAAKwE,EAAM4G,UAAW,OAClB,gCACI,cAAC,IAAD,CACIjD,SAAS,EACTe,UAAU,YACVJ,OAAO,UACPV,UAAU,EACVF,QArDZ,WAA0CqC,GAAgB,IAgDlD,4BAOA,cAAC,IAAD,CAAQjC,OAAQgC,EAAcN,MAAM,gBAAgB8B,QAASpB,EAA7D,SACI,qBAAK3D,UAAWkD,IAAQC,YAAxB,SACI,oBAAInD,UAAU,qBAAd,SACK0E,WAQrB,IAAMM,EAAYvH,EAAMwH,MAAM1P,KAAI,SAACpD,EAAMkH,GACrC,OAAQ,yBAAQ+F,MAAO/F,EAAf,cAAgClH,EAAK+S,OAAO,EAAG,GAA/C,UAAyB7L,MAQrC,OACI,gCACI,cAAC,IAAD,CACI0H,SAzDZ,SAA6B9B,GACzBxB,EAAMgG,cAAc0B,gBAAgBrL,SAASmF,EAAEE,OAAOC,QACtD3B,EAAMiG,aAAajG,EAAMgG,gBAwDjBrC,SAAS,EACTgE,UAVM,CACdpD,KAAM,gBACND,OAAQ,WASAN,aAAchE,EAAMgG,cAAc4B,eAJtC,SAKKL,IAEL,cAAC,IAAD,CAAQhD,KAAK,UAAUZ,SAAS,EAAMD,QAzF9C,WACI1D,EAAMgG,cAAcM,aACpBtG,EAAMiG,aAAa,IAAIM,gBAAcvG,EAAMgG,cAAcQ,QAASxG,EAAMgG,cAAcS,2B,uCC9BvF,SAASoB,EAAU7H,GACtB,IAAO9I,EAAW4Q,cAAX5Q,QAEP,EAAsBiJ,WAAe,IAAIpI,IAAI,IAAI6C,MAAjD,mBAAOE,EAAP,KAAYiN,EAAZ,KACA,EAA4B5H,YAAe,GAA3C,mBAAO6H,EAAP,KAAeC,EAAf,KAEA9H,aAAgB,WACZ8H,GAAU,GAEV,IAAIC,GAAa,EASjB,OAPAnQ,IAAImG,YAAY8B,EAAM5L,WAAY8C,GAAS2P,MAAK,SAAC/L,GACzCoN,IAEJH,EAAOjN,GACPmN,GAAU,OAGP,WAAMC,GAAa,KAC3B,CAAChR,EAAS8I,EAAM5L,aAEnB,IAAI+S,EAAM,wBACN/G,EAAO,wBAEX,GAAG4H,EAAO,CACNb,EAAM,qBAAK/B,IAAI,MAAM7C,UAAU,kBAAkB8C,IAAKvK,EAAIqN,OAAOnI,EAAM5L,cAEvE,IAAMgU,EAAUtN,EAAIK,eAAqCxG,IAAzBmG,EAAIK,SAAJ,KAC5B,qBAAKoH,UAAU,eAAf,SACI,cAAC,IAAD,CAAmB8F,SAAS,OAAOC,MAAOC,IAAOC,eAAe,EAAhE,SACK1N,EAAIK,SAAJ,SAGX,4CAEIsN,EAAenN,YAAaR,GAAKhD,KAAI,SAAA4Q,GACvC,OAAGA,EAAKjN,KACI,oCAAuB,cAAC,IAAD,CAAM8I,KAAK,OAAOD,OAAO,YAAhD,IAA6D,4BAAIoE,EAAKlT,SAA7DkT,EAAKlT,MAElB,mCAAsB,cAAC,IAAD,CAAM+O,KAAK,QAAQD,OAAO,WAAhD,IAA4D,4BAAIoE,EAAKlT,OAArE,MAASkT,EAAKlT,SAG1B4K,EACA,gCACI,kDACA,qBAAKmC,UAAU,UAAf,SACI,gCACI,kCACI,+BAAI,6BAAI,2CAAoB,6BAAI,mBAAGoG,IAAI,aAAajH,OAAO,SAASkH,KAAM9M,YAAUkE,EAAM5L,WAAY0G,EAAIhG,MAAMiH,IAAhF,SAAuFjB,EAAIhG,MAAMiH,UACjI,+BAAI,6BAAI,wCAAiB,6BAAKjB,EAAIhG,MAAMU,UACxC,+BAAI,6BAAI,6CAAsB,6BAAKsF,EAAIhG,MAAMW,cAC7C,+BAAI,6BAAI,yCAAkB,6BAAKqF,EAAIhG,MAAMoB,WACzC,+BAAI,6BAAI,4CAAqB,6BAAK4E,EAAIhG,MAAMuB,cAC5C,+BAAI,6BAAI,4CAAqB,6BAAI,mBAAGsS,IAAI,aAAajH,OAAO,SAASkH,KAAMhM,YAAgBoD,EAAM5L,WAAY0G,EAAIhG,MAAMa,KAAtF,SAA8FmF,EAAIhG,MAAMa,WACzI,+BAAI,6BAAI,4CAAqB,6BAAI,mBAAGgT,IAAI,aAAajH,OAAO,SAASkH,KAAMjN,YAAWqE,EAAM5L,WAAY0G,EAAIhG,MAAM6I,SAAjF,SAA8F7C,EAAIhG,MAAM6I,eACzI,+BAAI,6BAAI,4CAAqB,6BAAI,mBAAGgL,IAAI,aAAajH,OAAO,SAASkH,KAAMjN,YAAWqE,EAAM5L,WAAY0G,EAAIhG,MAAMgB,SAAjF,SAA8FgF,EAAIhG,MAAMgB,eACzI,+BAAI,6BAAI,4CAAqB,6BAAI,mBAAG6S,IAAI,aAAajH,OAAO,SAASkH,KAAMjN,YAAWqE,EAAM5L,WAAY0G,EAAIhG,MAAMiB,SAAjF,SAA8F+E,EAAIhG,MAAMiB,eACzI,+BAAI,6BAAI,4CAAqB,6BAAI,mBAAG4S,IAAI,aAAajH,OAAO,SAASkH,KAAMjN,YAAWqE,EAAM5L,WAAY0G,EAAIhG,MAAMmB,QAAjF,SAA8F6E,EAAIhG,MAAMmB,cACzI,+BAAI,6BAAI,4CAAqB,6BAAI,mBAAG0S,IAAI,aAAajH,OAAO,SAASkH,KAAMjN,YAAWqE,EAAM5L,WAAY0G,EAAIhG,MAAMkB,UAAjF,SAA8F8E,EAAIhG,MAAMkB,gBACzI,+BAAI,6BAAI,kDAA2B,6BAAK8E,EAAIhG,MAAMmG,kBAClD,+BAAI,6BAAI,mDAA4B,6BAAKH,EAAIhG,MAAMwB,cAAc,MAAM,iBAInF,uBACA,0CACA,qBAAKiM,UAAU,UAAf,SACK6F,IAEL,uBACA,6CACA,qBAAK7F,UAAU,UAAf,SACI,6BACKkG,SAOjB,OACI,qBAAKlG,UAAU,YAAf,SACI,cAAC,IAAD,CAAMC,UAAWC,IAAUoG,MAA3B,SACI,sBAAKtG,UAAU,YAAf,UACI,qBAAKA,UAAU,wBAAf,SACK4E,IAEL,qBAAK5E,UAAU,eAAf,SACKnC,W,aC5FlB,SAAS0I,EAAW9I,GACvB,IAAO3I,EAAWyQ,cAAXzQ,QAEP,EAAoC8I,WAAe,IAAnD,mBAAO4I,EAAP,KAAmBC,EAAnB,KACA,EAA4B7I,YAAe,GAA3C,mBAAO6H,EAAP,KAAeC,EAAf,KAEA9H,aAAgB,WACZ8H,GAAU,GACV7Q,YAAc4I,EAAM5L,WAAYiD,GAASwP,MAAK,SAACkC,GAC3CC,EAAcD,GACdd,GAAU,QAEf,CAAC5Q,EAAS2I,EAAM5L,aAEnB,IAAI6U,EAAO,CAAC,qDAAQ,YAiBpB,OAhBGjB,IAEKiB,EADDF,EAAW9P,OAAO,EACV8P,EAAWjR,KAAI,SAACgD,GACnB,IAAM/F,EAAK+F,EAAIK,SACToJ,EAAOlJ,YAAUP,GAAK,UAAU,SACtC,OACA,eAAC,IAAD,CAAMyH,UAAU,0BAA6CC,UAAWC,IAAUC,IAAlF,UACI,qBAAK0C,IAAI,cAAcC,IAAKvK,EAAIqN,OAAOnI,EAAM5L,cAC7C,cAAC,IAAD,CAAcmQ,KAAMA,EAAMZ,SAAS,EAAMiF,KAAM,QAAQ9N,EAAIhG,MAAMiH,GAAjE,SAAqE,4BAAIhH,EAAGS,KAAKT,EAAGS,KAAKsF,EAAIhG,MAAMU,WAFxDsF,EAAIhG,MAAMiH,OAOtD,CAAC,2EAAyDxH,IAAKyL,EAAM5L,YAAYoS,QAAhF,KAA0F,mBAAGoC,KAAK,QAAR,yBAAlF,UAIxB,qBAAKrG,UAAU,YAAf,SACI,qBAAKA,UAAU,6BAAf,SACK0G,MCtCN,SAASC,EAAgBlJ,GAM5B,IAAMmJ,EAAe5U,IAAKuD,KAAI,SAACsR,EAAKxN,GAChC,OAAQ,yBAAQ+F,MAAO/F,EAAf,cAAgCwN,EAAI5C,QAApC,MAAyB5K,MAGrC,OACI,8BACI,cAAC,IAAD,CACI0H,SAXZ,SAA6B9B,GACzBxB,EAAMqJ,cAAchN,SAASmF,EAAEE,OAAOC,SAW9BgC,SAAS,EACTK,aAAchE,EAAM5L,WAHxB,SAIK+U,M,YC2DFG,MA9Df,SAAatJ,GAEX,MAAoCG,IAAMoJ,SAAStN,eAAnD,mBAAO7H,EAAP,KAAmBoV,EAAnB,KAEMvH,EAAK,IAAIsE,gBAAchS,IAAKH,GAAYoS,SAG9C,EAA2CrG,IAAMoJ,SAAStH,GAA1D,mBAAO+D,EAAP,KAAsByD,EAAtB,KACA,EAA6BtJ,IAAMoJ,SAAStH,EAAGyH,eAA/C,mBAAOlC,EAAP,KAAcmC,EAAd,KACA,EAAkCxJ,IAAMoJ,SAAStH,EAAG2E,aAApD,mBAAOA,EAAP,KAAkBgD,EAAlB,KAaIC,EAAiB,wBAIrB,OAHGjD,IACDiD,EAAiB,cAAC,IAAD,CAAclG,SAAS,EAAMY,KAAK,cAAcqE,KAAM,eAAe3G,EAAGhN,oBAAqBuF,KAAK,gBAGnH,cAAC,IAAD,UACE,sBAAK+H,UAAU,MAAf,UACE,eAAC,IAAD,WACA,eAAC,IAAOuH,MAAR,CAAcC,MAAOC,IAAUC,KAA/B,UACE,cAAC,IAAOC,QAAR,uBACA,cAAC,IAAOC,QAAR,IACA,cAAC,IAAD,CAAcxG,SAAS,EAAMY,KAAK,aAAaqE,KAAK,wCAAwCpO,KAAK,WACjG,cAAC,IAAD,CAAcmJ,SAAS,EAAMY,KAAK,QAAQqE,KAAK,QAAQpO,KAAK,SAC3DqP,KAEH,eAAC,IAAOC,MAAR,CAAeC,MAAOC,IAAUI,MAAhC,UACE,cAAClB,EAAD,CAAiB9U,WAAYA,EAAYiV,cArBjD,SAAuBzN,GACrBU,YAAqBV,GACrB4N,EAAc5N,MAqBR,cAACiK,EAAD,CACEuB,UAAU,EACVpB,cAAeA,EACfwB,MAAOA,EACPZ,UAAWA,EACXX,aAlCV,SAAsBhE,GACpBwH,EAAiBxH,GACjB0H,EAAY1H,EAAGyH,eACfE,EAAa3H,EAAG2E,sBAoCZ,eAAC,IAAD,WACE,cAAC,IAAD,CAAOyD,OAAK,EAACC,KAAK,IAAIC,SAAU,cAACxK,EAAD,CAAS3L,WAAYA,EAAY6N,GAAI+D,MACrE,cAAC,IAAD,CAAOqE,OAAK,EAACC,KAAK,QAAQC,SAAW,cAACxK,EAAD,CAAS3L,WAAYA,EAAY6N,GAAI+D,MAC1E,cAAC,IAAD,CAAOsE,KAAK,gBAAgBC,SAAW,cAAC1C,EAAD,CAAWzT,WAAYA,EAAa6N,GAAI+D,MAC/E,cAAC,IAAD,CAAOsE,KAAK,uBAAuBC,SAAW,cAACzB,EAAD,CAAa1U,WAAYA,EAAY6N,GAAI+D,e,QCrE3F/F,EAAUuK,cAEhBC,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,CAAK1K,QAASA,MAEhB2K,SAASC,eAAe,W","file":"static/js/main.b45fc0d8.chunk.js","sourcesContent":["import { Wallet } from 'algorand-session-wallet';\nimport algosdk, {Algodv2, makeAssetCreateTxnWithSuggestedParamsFromObject} from 'algosdk'\nimport { NFT, Token } from './nft';\nimport { Metadata } from './metadata'\nimport { conf } from './config'\n\nfunction getClient(activeConf: number): Algodv2 {\n  return new algosdk.Algodv2(\"\", conf[activeConf].algod, \"\")\n}\n\n\nfunction setOrUndef(addr: string): string | undefined {\n  return addr===\"\"?undefined:addr\n}\n\nexport async function createToken(wallet: Wallet, activeConf: number, token: Token, md: Metadata): Promise<number> {\n    const addr      = wallet.getDefaultAccount()\n    const suggested = await getSuggested(activeConf, 10)\n\n    const create_txn =  makeAssetCreateTxnWithSuggestedParamsFromObject({\n        from: addr,\n        assetName: md.name,\n        unitName: md.unitName,\n        assetURL: token.url,\n        assetMetadataHash: md.toHash(),\n        manager: setOrUndef(token.manager),\n        reserve: setOrUndef(token.reserve),\n        clawback: setOrUndef(token.clawback),\n        freeze: setOrUndef(token.freeze),\n        total: Math.pow(10, token.decimals),\n        decimals: token.decimals,\n        defaultFrozen: token.defaultFrozen,\n        suggestedParams: suggested\n    })\n\n    const [create_txn_s]  = await wallet.signTxn([create_txn])\n\n    const result = await sendWait(activeConf, [create_txn_s])\n    return result['asset-index']\n}\n\nexport async function getSuggested(activeConf: number, rounds: number) {\n    const txParams = await getClient(activeConf).getTransactionParams().do();\n    return { ...txParams, lastRound: txParams['firstRound'] + rounds }\n}\n\nexport async function getToken(activeConf: number, assetId: number): Promise<any> {\n  return await getClient(activeConf).getAssetByID(assetId).do()\n}\n\nexport async function getCollection(activeConf: number, address: string): Promise<any[]> {\n  const results = await getClient(activeConf).accountInformation(address).do()\n\n  const plist = []\n  for(const a in results['assets']){\n    if(results['assets'][a]['amount']>0)\n      plist.push(getToken(activeConf, results['assets'][a]['asset-id']))\n  }\n\n  const assets = await Promise.all(plist)\n  const collectionRequests = assets.map((a)=>{ return NFT.fromToken(activeConf, a) })\n  return Promise.all(collectionRequests)\n}\n\nexport async function sendWait(activeConf: number, signed: any[]): Promise<any> {\n    const client = getClient(activeConf)\n    try {\n        const {txId} = await client.sendRawTransaction(signed.map((t)=>{return t.blob})).do()\n        const result = await waitForConfirmation(client, txId, 3)\n        return result \n    } catch (error) { \n        console.error(error)\n    }\n\n    return undefined \n}\n\nasync function waitForConfirmation(client, txId, timeout) {\n    if (client == null || txId == null || timeout < 0) {\n      throw new Error('Bad arguments.');\n    }\n\n    const status = await client.status().do();\n    if (typeof status === 'undefined')\n      throw new Error('Unable to get node status');\n\n    const startround = status['last-round'] + 1;\n    let currentround = startround;\n  \n    /* eslint-disable no-await-in-loop */\n    while (currentround < startround + timeout) {\n      const pending = await client \n        .pendingTransactionInformation(txId)\n        .do();\n\n      if (pending !== undefined) {\n        if ( pending['confirmed-round'] !== null && pending['confirmed-round'] > 0) \n          return pending;\n  \n        if ( pending['pool-error'] != null && pending['pool-error'].length > 0) \n          throw new Error( `Transaction Rejected pool error${pending['pool-error']}`);\n      }\n\n      await client.statusAfterBlock(currentround).do();\n      currentround += 1;\n    }\n\n    /* eslint-enable no-await-in-loop */\n    throw new Error(`Transaction not confirmed after ${timeout} rounds!`);\n}","import { ipfsURL } from './nft'\nimport {Metadata} from './metadata'\nimport {conf} from './config'\n\n/*\n Currently an issue with resolving ipfs-car module in web3.storage when using react-scripts\n We just use the prebuilt one but with no types we have to just ignore the issue for now\n//import { Web3Storage } from 'web3.storage'\n*/\n// @ts-ignore\nimport { Web3Storage } from 'web3.storage/dist/bundle.esm.min.js'\n\n\nexport async function putToIPFS(activeConf: number, file: File, md: Metadata): Promise<string> {\n    const storage = new Web3Storage({token: conf[activeConf].storageToken})\n    try {\n      const imgAdded = await storage.put([file], {wrapWithDirectory: false})\n      md.image = ipfsURL(imgAdded)\n\n      return await storage.put([md.toFile()], {wrapWithDirectory: false})\n\n    } catch (err) { console.error(err) }\n    return \"\"\n}\n\n\nexport async function getMimeTypeFromIpfs(url: string): Promise<string> {\n    const req = new Request(url, { method:\"HEAD\" })\n    const resp = await fetch(req)\n    return resp.headers.get(\"Content-Type\")\n}\n\n\nexport async function getMetaFromIpfs(url: string): Promise<Metadata> {\n    const req = new Request(url)\n    const resp = await fetch(req)\n    const body = await resp.blob()\n    const text = await body.text()\n    const parsed = JSON.parse(text)\n    return new Metadata({\"_raw\":text, ...parsed}) \n}\n\n\n","import {NFT, JSON_TYPE} from './nft'\n\nfunction mdurl(nft: NFT): boolean {\n    return nft.urlMimeType === JSON_TYPE \n}\n\nfunction mdhash(nft: NFT): boolean {\n    return nft.token.metadataHash === Buffer.from(nft.metadata.toHash()).toString(\"base64\")\n}\n\nfunction total(nft: NFT): boolean {\n    return (nft.token.total / Math.pow(10, nft.token.decimals)) === 1\n}\n\n// TODO: Check that metadata contains correct fields\n// TODO: Check that integrity hashes are valid\n\nconst validators = {\n    \"URL Points to metadata\": mdurl,\n    \"Metadata Hash matches\":mdhash,\n    \"Total Supply Is 1\": total,\n}\n\n\nexport function validArc3(nft: NFT): boolean {\n    return validateArc3(nft).length === 0\n}\n\ninterface Arc3Test {\n    name: string\n    pass: boolean\n}\n\nexport function validateArc3(nft: NFT): Arc3Test[] {\n    const tests = []\n    for(const k in validators){\n        tests.push({name:k,pass:validators[k](nft)})\n    }\n    return tests \n}","type Config = {\n    network: string;       // The network to use for creating nfts\n    storageToken: string;  // The token provided by web3.storage\n    ipfsGateway: string;   // The IPFS gateway url for retrieving files\n    algod: string          // The Algod api url to use\n    blockExplorer: string; // The Block Explorer to allow linking out to\n}\n\nexport const conf = require(\"../config.json\") as Config[];\n\nexport function getAddrUrl(idx: number, addr: string): string {\n    return conf[idx].blockExplorer + \"address/\" + addr\n}\nexport function getAsaUrl(idx: number, id: number): string {\n    return conf[idx].blockExplorer + \"asset/\" + id \n}\n\nconst activeConfKey = \"active-conf\"\nexport function sessionGetActiveConf(): number {\n    const ac = sessionStorage.getItem(activeConfKey)\n    if(ac === undefined || ac === null) return 0\n    return parseInt(ac)\n}\n\nexport function sessionSetActiveConf(ac: number)  {\n    sessionStorage.setItem(activeConfKey, ac.toString())\n}\n","import { createToken, getToken } from \"./algorand\"\nimport { getMimeTypeFromIpfs, getMetaFromIpfs } from \"./ipfs\"\nimport { sha256 } from 'js-sha256'\nimport { Wallet } from \"algorand-session-wallet\"\nimport { conf } from \"./config\"\nimport {Metadata} from './metadata'\n\n/*\n\nThe following is a class and metadata type to support the ARC-0003 standard \nset forth by the Algorand Foundation and Community\n\nhttps://github.com/algorandfoundation/ARCs/blob/main/ARCs/arc-0003.md\n\n*/\n\nexport const ARC3_NAME_SUFFIX = \"@arc3\"\nexport const ARC3_URL_SUFFIX = \"#arc3\"\nexport const METADATA_FILE = \"metadata.json\"\nexport const JSON_TYPE = 'application/json'\n\nexport function asaURL(cid: string): string { return ipfsURL(cid)+ARC3_URL_SUFFIX }\nexport function ipfsURL(cid: string): string { return \"ipfs://\"+cid }\nexport function fileURL(activeConf: number, cid: string, name: string): string { return conf[activeConf].ipfsGateway + cid+\"/\"+name }\n\nexport function resolveProtocol(activeConf: number, url: string): string {\n\n    if(url.endsWith(ARC3_URL_SUFFIX)) \n        url = url.slice(0, url.length-ARC3_URL_SUFFIX.length)\n\n    const chunks = url.split(\"://\")\n\n    // No protocol specified, give up\n    if(chunks.length < 2 ) return url\n\n    //Switch on the protocol\n    switch(chunks[0]){\n        case \"ipfs\": //Its ipfs, use the configured gateway\n            return conf[activeConf].ipfsGateway + chunks[1]\n        case \"https\": //Its already http, just return it\n            return url\n        // TODO: Future options may include arweave or algorand\n    }\n\n    return url\n}\n\nexport async function imageIntegrity(file: File): Promise<string> {\n    const buff = await file.arrayBuffer()\n    const bytes = new Uint8Array(buff)\n    const hash = new Uint8Array(sha256.digest(bytes));\n    return \"sha256-\"+Buffer.from(hash).toString(\"base64\")\n}\n\nexport class Token {\n    id:  number \n\n    name: string        \n    unitName: string    \n    url: string         \n\n    metadataHash: string\n\n    total: number       \n    decimals: number    \n\n    creator: string\n\n    manager: string\n    reserve: string\n    clawback: string\n    freeze: string\n\n    defaultFrozen: boolean\n    \n    constructor(t: any) {\n       this.name            = t.name || \"\"\n       this.unitName        = t.unitName || \"\"\n       this.url             = t.url || \"\"\n\n       this.metadataHash    = t.metadataHash || \"\"\n\n       this.total           = t.total || 0\n       this.decimals        = t.decimals || 0\n\n       this.creator         = t.creator || \"\"\n\n       this.manager         = t.manager || \"\"\n       this.reserve         = t.reserve || \"\"\n       this.clawback        = t.clawback || \"\"\n       this.freeze          = t.freeze || \"\"\n\n       this.defaultFrozen   = t.defaultFrozen || false\n    }\n\n    static fromParams(t: any ): Token {\n        const p  = t.params\n        return {\n            id              : t.index,\n            name            : p.name || \"\",\n            unitName        : p['unit-name'] || \"\",\n            url             : p.url || \"\",\n            metadataHash    : p['metadata-hash'] || \"\",\n            total           : p.total || 0,\n            decimals        : p.decimals || 0,\n            creator         : p.creator || \"\",\n            manager         : p.manager || \"\",\n            reserve         : p.reserve || \"\",\n            clawback        : p.clawback || \"\",\n            freeze          : p.freeze || \"\",\n            defaultFrozen   : p['default-frozen'] || false,\n        } as Token\n\n    }\n\n}\n\nexport class NFT {\n    token: Token\n    metadata: Metadata\n\n    urlMimeType: string\n\n    constructor(md: Metadata, token?: Token, urlMimeType?: string) {\n        this.metadata = md\n        this.token = token\n        this.urlMimeType = urlMimeType\n    }\n\n    static async create(wallet: Wallet, activeConf:number, token: Token, md: Metadata, cid: string): Promise<NFT> {\n        token.url = asaURL(cid)\n        const asset_id = await createToken(wallet, activeConf, token, md)\n        return await NFT.fromAssetId(activeConf, asset_id)\n    }\n\n    static async fromAssetId(activeConf: number, assetId: number): Promise<NFT>{\n        return NFT.fromToken(activeConf, await getToken(activeConf, assetId))\n    }\n\n    static async fromToken(activeConf: number, t: any): Promise<NFT> {\n        const token = Token.fromParams(t)\n        const url = resolveProtocol(activeConf, token.url)\n\n        //TODO: provide getters for other storage options\n        // arweave? note field?\n\n        const urlMimeType = await getMimeTypeFromIpfs(url)\n\n        switch(urlMimeType){\n            case JSON_TYPE:\n                return new NFT(await getMetaFromIpfs(url), token, urlMimeType)\n        }\n\n        return new NFT(Metadata.fromToken(token), token, urlMimeType)\n    }\n\n\n    imgURL(activeConf: number): string {\n        // Try to resolve the protocol, if one is set \n        const url = resolveProtocol(activeConf, this.metadata.image)\n\n        // If the url is different, we resolved it correctly\n        if(url !== this.metadata.image) return url\n\n        // It may be a relative url stored within the same directory as the metadata file\n        // Lop off the METADATA_FILE bit and append image path \n        if(this.token.url.endsWith(METADATA_FILE)){\n            const dir = this.token.url.substring(0,this.token.url.length-METADATA_FILE.length)\n            return resolveProtocol(activeConf, dir)+this.metadata.image\n        }\n\n        // give up\n        return url \n    }\n}","import {Token, JSON_TYPE, METADATA_FILE} from './nft'\nimport { sha256 } from 'js-sha256'\n\nexport type Properties = {\n    [key: string]: string | number\n}\n\nexport type LocalizationIntegrity = {\n    [key: string]: string \n}\n\nexport type Localization = {\n    uri: string \n    default: string \n    locales: string[] \n    integrity?: LocalizationIntegrity\n}\n\n\nfunction omitRawAndEmpty(k,v){\n    if(k === \"_raw\") return undefined;\n    if(v === \"\") return undefined;\n    return v\n}\n\nexport class Metadata {\n    _raw: string = undefined\n\n    name: string = \"\"\n    description: string = \"\"\n\n    image: string = \"\"\n    decimals?: number = 0\n    unitName?: string = \"\"\n    image_integrity?: string = \"\"\n    image_mimetype?: string = \"\"\n\n    background_color?: string = \"\"\n    external_url?: string = \"\"\n    external_url_integrity?: string = \"\"\n    external_url_mimetype?: string = \"\"\n\n    animation_url?: string = \"\"\n    animation_url_integrity?: string = \"\"\n    animation_url_mimetype?: string = \"\"\n\n    extra_metadata?: string = \"\"\n\n    localization?: Localization\n\n    properties?: Properties\n\n    constructor(args: any = {}) { Object.assign(this, args) }\n\n    toHash(): Uint8Array {\n        if(this.hasOwnProperty(\"extra_metadata\")){\n            //TODO\n            //am = SHA-512/256(\"arc0003/am\" || SHA-512/256(\"arc0003/amj\" || content of JSON metadata file) || e)\n        }\n\n        if(this._raw === undefined) \n            this._raw = this.toString()\n\n        const hash = sha256.create();\n        hash.update(this._raw);\n        return new Uint8Array(hash.digest())\n    }\n\n    toFile(): File {\n        const md_blob = new Blob([this.toString()], { type: JSON_TYPE })\n        return new File([md_blob], METADATA_FILE)\n    }\n\n    toString(): string {\n        return JSON.stringify({...this}, omitRawAndEmpty)\n    }\n\n    static fromToken(t: Token){\n        return new Metadata({ name:t.name, image: t.url, decimals: t.decimals })\n    }\n}\n","import * as React from 'react'\nimport { InputGroup, Button, Elevation, FileInput, Card, Dialog, Classes, Collapse, NumericInput, FormGroup, Switch } from \"@blueprintjs/core\"\nimport {  NFT, Token, imageIntegrity } from './lib/nft'\nimport {Metadata} from './lib/metadata'\nimport { SessionWallet } from 'algorand-session-wallet'\nimport { putToIPFS } from './lib/ipfs'\nimport{ useHistory } from 'react-router-dom'\n\nexport type MinterProps = {\n    activeConf: number\n    sw: SessionWallet\n}\n\nexport function Minter(props: MinterProps){\n\n    const history = useHistory()\n\n    const [meta, setMeta]               = React.useState(new Metadata())\n    const [loading, setLoading]         = React.useState(false)\n    const [imgSrc, setImgSrc]           = React.useState<string>();\n    const [fileObj, setFileObj]         = React.useState<File>();\n\n    const [extraProps, setExtraProps]   = React.useState([])\n    const [extraPropsVisible, setExtraPropsVisible] = React.useState(false)\n\n    const [extraParamsVisible, setExtraParamsVisible] = React.useState(false)\n\n    // For MintDialog\n    const [cid, setCID]                 = React.useState(\"\")\n    const [isMinting, setIsMinting]     = React.useState(false)\n\n    const [token, setToken]             = React.useState(new Token({}))\n\n    function setFile(file: File) {\n        setFileObj(file)\n\n        const reader = new FileReader();\n        reader.onload = (e: any) => {  setImgSrc(e.target.result) }\n        reader.readAsDataURL(file);\n\n        setMeta((meta)=>{\n            return new Metadata({\n                ...meta,\n                image: file.name,\n                image_mimetype: file.type,\n                properties:{...meta.properties, size:file.size}\n            })\n        })\n    }\n\n\n    async function mintNFT() {\n        setLoading(true) \n\n        const md = await captureMetadata()\n        setMeta(md)\n\n        const cid = await putToIPFS(props.activeConf, fileObj, md)\n        setCID(cid)\n\n        setIsMinting(true)\n    }\n\n    function handleCancelMint(){\n        setIsMinting(false)\n        setLoading(false)\n    }\n\n    function handleSetNFT(nft: NFT){ return history.push(\"/nft/\"+nft.token.id) }\n\n    function handleChangeDecimals(v: number){ setToken((token)=>{ return new Token({...token, \"decimals\":v}) }) }\n    function handleSetTokenParams(e) {\n        const tgt = e.target\n        const name = e.target.id\n        const value = tgt.type === \"checkbox\" ? tgt.checked: tgt.value as string \n        setToken((token)=>{ return new Token({...token, [name]:value}) })\n    }\n\n    function handleChangeMeta(event: { target: any; }) {\n        const target = event.target\n        const name = target.name as string\n        const value = target.type === 'checkbox' ? target.checked : target.value as string\n        setMeta((meta)=>{ return  new Metadata({...meta, [name]:value}) })\n    }\n\n    function handleShowExtraProps(){ setExtraPropsVisible(!extraPropsVisible) }\n    function handleShowExtraParams(){ setExtraParamsVisible(!extraParamsVisible) }\n    function handleExtraPropRemove(idx: number) { extraProps.splice(idx, 1); setExtraProps([...extraProps]) }\n    function handleAddExtraProp() { setExtraProps([...extraProps, emptyExtraProp()]) }\n    function emptyExtraProp(){ return { name:\"\", value: \"\" } }\n    function handleExtraPropUpdate(e){\n        const idx=parseInt(e.target.dataset.id)\n        if(e.target.id===\"name\") extraProps[idx][e.target.id]=e.target.value\n        else extraProps[idx][e.target.id] = e.target.value\n        setExtraProps([...extraProps])\n    }\n\n\n    function handleSetMyAddress(label: string){\n        return (e)=>{\n            setToken((token)=>{ \n                const addr = props.sw.getDefaultAccount()\n                if(addr === \"\") alert(\"You need to connect you wallet before you can do this.\")\n                return new Token({...token, [label]: addr})\n            })\n        }\n    }\n\n\n    async function captureMetadata(): Promise<Metadata> {\n        const eprops = extraProps.reduce((all, ep)=>{ return {...all, [ep.name]:ep.value} }, {})\n        const integ = await imageIntegrity(fileObj)\n        return new Metadata({\n            name:           token.name,\n            unitName:       token.unitName,\n            decimals:       token.decimals,\n            description:    meta.description,\n            image_mimetype: meta.image_mimetype,\n            image_integrity:integ, \n            properties:     { ...eprops, ...meta.properties}\n        })\n    }\n\n    return (\n        <div className='container'>\n            <Card elevation={Elevation.TWO} className='mint-card' >\n                <Uploader\n                    imgSrc={imgSrc}\n                    setFile={setFile}\n                    {...meta} />\n\n                <div className='container' >\n                    <FormGroup \n                        helperText=\"The Name for this asset\"\n                        label=\"Name\"\n                        labelFor=\"name\"\n                        labelInfo=\"(required)\" >\n                        <InputGroup\n                            name='name'\n                            placeholder='Name'\n                            className='details-basic details-title bp3-InputGroup bp3-large'\n                            onChange={handleSetTokenParams}\n                            type='text'\n                            id='name'\n                            value={token.name} />\n                    </FormGroup>\n                    <FormGroup\n                        helperText=\"The Unit Name for this asset \"\n                        label=\"Unit Name\"\n                        labelFor=\"unitName\"\n                        labelInfo=\"(required)\" >\n                        <InputGroup\n                            name='unitName'\n                            placeholder='Unit Name'\n                            className='details-basic details-title bp3-InputGroup bp3-large'\n                            onChange={handleSetTokenParams}\n                            type='text'\n                            id='unitName'\n                            value={token.unitName} />\n                    </FormGroup>\n                </div>\n\n                <div className='container'>\n                    <FormGroup \n                        helperText=\"A description of this asset\"\n                        label=\"Description\"\n                        labelFor=\"description\"\n                        labelInfo=\"(required)\" >\n                        <textarea\n                            rows={10}\n                            cols={30}\n                            placeholder='Description'\n                            className='details-description bp3-InputGroup bp3-large'\n                            onChange={handleChangeMeta}\n                            name='description'\n                            id='description'\n                            value={meta.description} />\n                    </FormGroup>\n                </div>\n\n                <div className='container extra-param-dropdown'>\n                    <Button \n                        onClick={handleShowExtraParams}  \n                        minimal={true} \n                        outlined={true} \n                        large={true}\n                        text={extraParamsVisible?\"Hide extra parameters\":\"Show extra parameters\"} \n                    />\n                    <Collapse isOpen={extraParamsVisible}>\n                        <div className='container extra-param-list'>\n\n                        <FormGroup \n                            inline={true}\n                            helperText=\"A value of >0 is considered a 'Fractional NFT'\"\n                            label=\"Decimals\" labelFor=\"decimals\" >\n                            <NumericInput \n                                defaultValue={0} min={0} max={19} \n                                name='decimals'\n                                id='decimals' \n                                fill={true}\n                                onValueChange={handleChangeDecimals} />\n                        </FormGroup>\n\n                        <FormGroup\n                            inline={true}\n                            label=\"Default Frozen\" labelFor=\"default-frozen\" >\n                            <Switch large={true} name='default-frozen' id='defaultFrozen'  onChange={handleSetTokenParams} />\n                        </FormGroup>\n\n                        <FormGroup\n                            inline={true}\n                            helperText=\"The Manager Address for this asset\" \n                            label=\"Manager Address\" labelFor=\"manager\" >\n                            <InputGroup \n                            rightElement={<Button minimal={true} text='Me' onClick={handleSetMyAddress('manager')} />}\n                            value={token.manager}\n                            name='manager' id='manager'   type='text' onChange={handleSetTokenParams}/>\n                        </FormGroup>\n\n                        <FormGroup\n                            inline={true}\n                            helperText=\"The Reserve Address for this asset\" \n                            label=\"Reserve Address\" labelFor=\"reserve\" >\n                            <InputGroup \n                            rightElement={<Button minimal={true} text='Me' onClick={handleSetMyAddress('reserve')} />}\n                            value={token.reserve}\n                            name='reserve' id='reserve'   type='text'  onChange={handleSetTokenParams} />\n                        </FormGroup>\n\n                        <FormGroup\n                            inline={true}\n                            helperText=\"The Clawback Address for this asset\" \n                            label=\"Clawback Address\" labelFor=\"clawback\" >\n                            <InputGroup \n                            rightElement={<Button minimal={true} text='Me' onClick={handleSetMyAddress('clawback')} />}\n                            value={token.clawback}\n                            name='clawback' id='clawback'   type='text'  onChange={handleSetTokenParams} />\n                        </FormGroup>\n\n                        <FormGroup\n                            inline={true}\n                            helperText=\"The Freeze Address for this asset\" \n                            label=\"Freeze Address\" labelFor=\"freeze\" >\n                            <InputGroup \n                            rightElement={<Button minimal={true} text='Me' onClick={handleSetMyAddress('freeze')} />} value={token.freeze}\n                            name='freeze' id='freeze'  type='text'  onChange={handleSetTokenParams}/>\n                        </FormGroup>\n                        </div>\n\n                    </Collapse>\n                </div>\n\n                <div className='container extra-prop-dropdown'>\n                    <Button \n                        onClick={handleShowExtraProps}  \n                        minimal={true} \n                        outlined={true} \n                        large={true}\n                        text={extraPropsVisible?\"Hide extra props\":\"Show extra props\"} \n                    />\n                    <Collapse isOpen={extraPropsVisible} className='extra-prop-collapse'>\n                        <p>Add string keys and values</p>\n                        <ul className='extra-prop-list'>\n                        { \n                            extraProps.map((props, idx)=>{ \n                                return (\n                                <li className='extra-prop-item' key={idx} >\n                                    <div className='extra-prop-container'>\n                                        <InputGroup \n                                            id=\"name\" \n                                            data-id={idx}\n                                            name=\"name\" \n                                            value={props.name}  \n                                            onChange={handleExtraPropUpdate} \n                                            className='details-basic details-artist bp3-InputGroup bp3-large' />\n                                        <InputGroup \n                                            id=\"value\" \n                                            name=\"value\" \n                                            data-id={idx}\n                                            value={props.value} \n                                            onChange={handleExtraPropUpdate} \n                                            className='details-basic details-artist bp3-InputGroup bp3-large' />\n                                        <Button minimal={true} intent='danger' icon='cross' onClick={()=>{ handleExtraPropRemove(idx) }}  />\n                                    </div>\n                                </li>\n                                )\n                            })\n                        }\n                        </ul>\n                        <Button fill={true} icon='plus' intent='primary' minimal={true} onClick={handleAddExtraProp} className='extra-prop-add' />\n                    </Collapse>\n                </div>\n\n                <div className='container custom-note-field'>\n\n                </div>\n\n                <div className='container container-mint'>\n                    <Button loading={loading}\n                        onClick={mintNFT}\n                        rightIcon='clean'\n                        large={true}\n                        minimal={true}\n                        outlined={true}\n                        intent='success'\n                        text='Mint' />\n                </div>\n            </Card>\n            <MintDialog \n                activeConf={props.activeConf}\n                token={token}\n                isMinting={isMinting} \n                cid={cid} \n                md={meta} \n                sw={props.sw}  \n                handleSetNFT={handleSetNFT}\n                handleCancelMint={handleCancelMint} \n                ></MintDialog>\n        </div>\n    )\n\n}\n\ntype UploaderProps = {\n    imgSrc: string | undefined\n    setFile(f: File): void\n};\n\nfunction Uploader(props: UploaderProps) {\n    function captureFile(event: any) {\n        event.stopPropagation()\n        event.preventDefault()\n        props.setFile(event.target.files.item(0))\n    }\n\n    if (props.imgSrc === undefined || props.imgSrc === \"\" ) return (\n        <div className='container'>\n            <div className='content content-piece' >\n                <FileInput large={true} disabled={false} text=\"Choose file...\" onInputChange={captureFile} />\n            </div>\n        </div>\n    )\n\n\n    return (\n        <div className='container' >\n            <div className='content content-piece'>\n                <img id=\"gateway-link\" alt=\"NFT\" src={props.imgSrc} />\n            </div>\n        </div>\n    )\n}\n\ntype MintDialogProps = {\n    activeConf: number\n    isMinting: boolean\n    cid: string\n    md: Metadata\n    sw: SessionWallet\n    token: Token \n    handleSetNFT(NFT)\n    handleCancelMint()\n}\n\nfunction MintDialog(props: MintDialogProps){\n    const [isLoading, setIsLoading] = React.useState(false)\n\n    function cancel(){\n        setIsLoading(false)\n        props.handleCancelMint()\n    }\n\n    async function mint(){\n        try {\n            setIsLoading(true)\n            const nft = await NFT.create(props.sw.wallet, props.activeConf, props.token, props.md, props.cid)\n            setIsLoading(false)\n            props.handleSetNFT(nft)\n        } catch (error) {\n           alert(\"Failed to create nft: \"+error) \n           setIsLoading(false)\n           props.handleCancelMint()\n        }\n    }\n\n    return (\n        <Dialog isOpen={props.isMinting} title=\"Mint it\" >\n            <div className={Classes.DIALOG_BODY}>\n                <p>File uploaded to ipfs {props.md.image} </p>\n                <p>Click \"Mint\" to create ASA</p>\n            </div>\n            <div className={Classes.DIALOG_FOOTER}>\n                <div className={Classes.DIALOG_FOOTER_ACTIONS}>\n                    <Button loading={isLoading} onClick={cancel}>Cancel</Button>\n                    <Button loading={isLoading} onClick={mint}>Mint</Button>\n                </div>\n            </div>\n        </Dialog>\n    )\n}","import * as React from 'react'\n\nimport { SessionWallet, allowedWallets } from 'algorand-session-wallet'\n\nimport { Dialog, Button, Classes, HTMLSelect, Intent } from '@blueprintjs/core'\nimport { IconName } from '@blueprintjs/icons'\n\n\ntype AlgorandWalletConnectorProps = {\n    darkMode: boolean\n    connected: boolean\n    accts: string[]\n    sessionWallet: SessionWallet\n    updateWallet(sw: SessionWallet): void\n}\n\nexport default function AlgorandWalletConnector(props:AlgorandWalletConnectorProps)  {\n\n    const [selectorOpen, setSelectorOpen] = React.useState(false)\n\n    const {sessionWallet,updateWallet} = props\n    React.useEffect(()=>{\n        if(sessionWallet.connected()) return\n\n        let interval: any\n        sessionWallet.connect().then((success)=>{\n            if(!success) return\n\n            // Check every 500ms to see if we've connected then kill the interval\n            // This is most useful in the case of walletconnect where it may be several \n            // seconds before the user connects\n            interval = setInterval(()=>{\n                if(sessionWallet.connected()) {\n                    clearInterval(interval)\n                    updateWallet(sessionWallet)\n                }\n            }, 500)\n\n        })\n\n        return ()=>{ clearInterval(interval) }\n\n    }, [sessionWallet, updateWallet])\n\n\n    function disconnectWallet() { \n        props.sessionWallet.disconnect()\n        props.updateWallet(new SessionWallet(props.sessionWallet.network, props.sessionWallet.permissionCallback)) \n    }\n\n    function handleDisplayWalletSelection() { setSelectorOpen(true) }\n\n    async function handleSelectedWallet(e: any) {\n        const choice = e.currentTarget.id\n\n        if(!(choice in allowedWallets)) {\n            if(props.sessionWallet.wallet !== undefined) props.sessionWallet.disconnect()\n            return setSelectorOpen(false)\n        }\n\n        const sw = new SessionWallet(props.sessionWallet.network, props.sessionWallet.permissionCallback, choice)\n\n        if(!await sw.connect()) {\n            sw.disconnect()\n        }\n\n        props.updateWallet(sw)\n\n        setSelectorOpen(false)\n    }\n\n    function handleChangeAccount(e: any) {\n        props.sessionWallet.setAccountIndex(parseInt(e.target.value))\n        props.updateWallet(props.sessionWallet)\n    }\n\n    const walletOptions = []\n    for(const [k,v] of Object.entries(allowedWallets)){\n        walletOptions.push((\n        <li key={k}>\n            <Button id={k}\n                large={true} \n                fill={true} \n                minimal={true} \n                outlined={true} \n                onClick={handleSelectedWallet}\n                > \n                <div className='wallet-option'>\n                    <img alt='wallet-branding' className='wallet-branding' src={  v.img(props.darkMode)} />\n                    <h5>{v.displayName()}</h5>\n                </div>\n                </Button>\n        </li>\n        ))\n    }\n\n    if (!props.connected) return (\n        <div>\n            <Button\n                minimal={true}\n                rightIcon='selection'\n                intent='warning'\n                outlined={true}\n                onClick={handleDisplayWalletSelection}>Connect Wallet</Button>\n\n            <Dialog isOpen={selectorOpen} title='Select Wallet' onClose={handleSelectedWallet} >\n                <div className={Classes.DIALOG_BODY}>\n                    <ul className='wallet-option-list'>\n                        {walletOptions}\n                    </ul>\n                </div>\n            </Dialog>\n        </div>\n    )\n\n\n    const addr_list = props.accts.map((addr, idx) => {\n        return (<option value={idx} key={idx}> {addr.substr(0, 8)}...  </option>)\n    })\n\n    const iconprops = { \n        icon: 'symbol-circle' as IconName, \n        intent: 'success'  as Intent\n    }\n\n    return (\n        <div>\n            <HTMLSelect \n                onChange={handleChangeAccount} \n                minimal={true} \n                iconProps={iconprops} \n                defaultValue={props.sessionWallet.accountIndex()} >\n                {addr_list}\n            </HTMLSelect>\n            <Button icon='log-out' minimal={true} onClick={disconnectWallet} ></Button>\n        </div>\n    )\n}","import * as React from 'react'\nimport { Elevation, Card, Icon } from \"@blueprintjs/core\"\nimport { NFT, resolveProtocol  } from './lib/nft'\nimport { Metadata } from './lib/metadata'\nimport { SessionWallet } from 'algorand-session-wallet'\nimport {useParams} from 'react-router-dom'\nimport { getAddrUrl, getAsaUrl } from './lib/config'\nimport { validateArc3 } from './lib/validator'\n\nimport SyntaxHighlighter from 'react-syntax-highlighter'\nimport { docco } from  'react-syntax-highlighter/dist/esm/styles/hljs'\n\nexport type NFTViewerProps = {\n    activeConf: number\n    sw: SessionWallet\n}\n\nexport function NFTViewer(props: NFTViewerProps) {\n    const {assetId} = useParams()\n\n    const [nft, setNFT] = React.useState(new NFT(new Metadata()))\n    const [loaded, setLoaded] = React.useState(false)\n\n    React.useEffect(()=>{\n        setLoaded(false)\n\n        let subscribed = true\n\n        NFT.fromAssetId(props.activeConf, assetId).then((nft)=>{ \n            if(!subscribed) return\n\n            setNFT(nft) \n            setLoaded(true)\n        })\n\n        return ()=>{ subscribed = false }\n    }, [assetId, props.activeConf])\n\n    let img = <div></div>\n    let meta = <div></div>\n\n    if(loaded){\n        img = <img alt='nft' className='bp3-elevation-3' src={nft.imgURL(props.activeConf)}/>\n\n        const mdProps = nft.metadata && nft.metadata[\"_raw\"] !== undefined?(\n            <div className='raw-metadata'>\n                <SyntaxHighlighter language='json' style={docco} wrapLongLines={true}  >\n                    {nft.metadata[\"_raw\"]}\n                </SyntaxHighlighter>\n            </div>\n        ):<p>No metadata</p>\n\n        const arc3Invalids = validateArc3(nft).map(test=>{\n            if(test.pass)\n                return (<li key={test.name} >  <Icon icon='tick' intent='success' /> <b>{test.name}</b></li>) \n\n            return (<li key={test.name} > <Icon icon='cross' intent='danger' /> <b>{test.name}</b> </li>) \n        })\n\n        meta = (\n        <div>\n            <h5>Token Parameters</h5>\n            <div className='content'>\n                <table>\n                    <tbody>\n                        <tr><td><b>ASA id: </b></td><td><a rel=\"noreferrer\" target=\"_blank\" href={getAsaUrl(props.activeConf, nft.token.id)} >{nft.token.id}</a></td></tr>\n                        <tr><td><b>Name:</b></td><td>{nft.token.name}</td></tr>\n                        <tr><td><b>Unit Name:</b></td><td>{nft.token.unitName}</td></tr>\n                        <tr><td><b>Total:</b></td><td>{nft.token.total}</td></tr>\n                        <tr><td><b>Decimals:</b></td><td>{nft.token.decimals}</td></tr>\n                        <tr><td><b>URL:     </b></td><td><a rel=\"noreferrer\" target=\"_blank\" href={resolveProtocol(props.activeConf, nft.token.url)} >{nft.token.url}</a></td></tr>\n                        <tr><td><b>Creator: </b></td><td><a rel=\"noreferrer\" target=\"_blank\" href={getAddrUrl(props.activeConf, nft.token.creator)}  >{nft.token.creator}</a></td></tr>\n                        <tr><td><b>Manager: </b></td><td><a rel=\"noreferrer\" target=\"_blank\" href={getAddrUrl(props.activeConf, nft.token.manager)}  >{nft.token.manager}</a></td></tr>\n                        <tr><td><b>Reserve: </b></td><td><a rel=\"noreferrer\" target=\"_blank\" href={getAddrUrl(props.activeConf, nft.token.reserve)}  >{nft.token.reserve}</a></td></tr>\n                        <tr><td><b>Freeze:  </b></td><td><a rel=\"noreferrer\" target=\"_blank\" href={getAddrUrl(props.activeConf, nft.token.freeze) }  >{nft.token.freeze }</a></td></tr>\n                        <tr><td><b>Clawback:</b></td><td><a rel=\"noreferrer\" target=\"_blank\" href={getAddrUrl(props.activeConf, nft.token.clawback)} >{nft.token.clawback}</a></td></tr>\n                        <tr><td><b>Metadata Hash: </b></td><td>{nft.token.metadataHash}</td></tr>\n                        <tr><td><b>Default Frozen: </b></td><td>{nft.token.defaultFrozen?\"Yes\":\"No\"}</td></tr>\n                    </tbody>\n                </table>\n            </div>\n            <hr/>\n            <h5>Metadata</h5>\n            <div className='content'>\n                {mdProps}\n            </div>\n            <hr/> \n            <h5>ARC3 tests:</h5>\n            <div className='content'>\n                <ul>\n                    {arc3Invalids}\n                </ul>\n            </div>\n        </div>\n        )\n    }\n\n    return (\n        <div className='container'>\n            <Card elevation={Elevation.THREE} >\n                <div className='container'> \n                    <div className='content content-piece'>\n                        {img}       \n                    </div>\n                    <div className='content-info'>\n                        {meta}\n                    </div>\n                </div>\n            </Card>\n        </div>\n    )\n}","import * as React from 'react'\nimport { Elevation, Card, AnchorButton } from \"@blueprintjs/core\"\nimport { SessionWallet } from 'algorand-session-wallet'\nimport {useParams} from 'react-router-dom'\nimport { conf } from './lib/config'\nimport {getCollection} from './lib/algorand' \nimport { validArc3 } from './lib/validator'\n\nexport type CollectionProps = {\n    activeConf: number\n    sw: SessionWallet\n}\n\nexport function Collection(props: CollectionProps) {\n    const {address} = useParams()\n\n    const [collection, setCollection] = React.useState([])\n    const [loaded, setLoaded] = React.useState(false)\n\n    React.useEffect(()=>{\n        setLoaded(false)\n        getCollection(props.activeConf, address).then((collection)=>{\n            setCollection(collection)\n            setLoaded(true)\n        })\n    }, [address, props.activeConf])\n\n    let nfts = [<h3 key='looking'>Checking for NFTs...</h3>]\n    if(loaded ){\n        if(collection.length>0){\n            nfts = collection.map((nft)=>{\n                const md = nft.metadata\n                const icon = validArc3(nft)?\"confirm\":\"circle\"\n                return (\n                <Card className='content-collection-item' key={nft.token.id} elevation={Elevation.TWO}>\n                    <img alt='nft content' src={nft.imgURL(props.activeConf)} />\n                    <AnchorButton icon={icon} minimal={true} href={'/nft/'+nft.token.id}><b>{md.name?md.name:nft.token.name}</b></AnchorButton>\n                </Card>\n                )\n            })\n        }else{\n            nfts = [<h3 key='none'>You dont have any ARC3 compliant NFTs on {conf[props.activeConf].network}, <a href='/mint'>Mint one?</a></h3>]\n        }\n    }\n    return (\n    <div className='container'>\n        <div className='content content-collection'>\n            {nfts}\n        </div>\n    </div>\n    )\n}","import { HTMLSelect } from '@blueprintjs/core'\nimport React from 'react'\nimport {conf} from './lib/config'\n\ninterface NetworkSelectorProps {\n    activeConf: number\n    selectNetwork(network: number)\n}\n\nexport function NetworkSelector(props: NetworkSelectorProps){\n\n    function handleSelectNetwork(e){\n        props.selectNetwork(parseInt(e.target.value))\n    }\n\n    const network_list = conf.map((cfg, idx) => {\n        return (<option value={idx} key={idx}> {cfg.network} </option>)\n    })\n\n    return (\n        <div>\n            <HTMLSelect \n                onChange={handleSelectNetwork} \n                minimal={true} \n                defaultValue={props.activeConf} >\n                {network_list}\n            </HTMLSelect>\n        </div>\n    )\n}","import { AnchorButton, Alignment, Navbar } from '@blueprintjs/core';\nimport { SessionWallet } from 'algorand-session-wallet';\nimport React from 'react';\nimport {Minter} from './Minter';\nimport AlgorandWalletConnector from './AlgorandWalletConnector'\nimport {NFTViewer} from './NFTViewer'\nimport {Collection} from './Collection'\nimport { conf, sessionGetActiveConf, sessionSetActiveConf } from './lib/config';\nimport {NetworkSelector} from './NetworkSelector'\n\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n} from 'react-router-dom'\n\n\ntype AppProps = {\n  history: History\n}\n\n\nfunction App(props: AppProps) {\n\n  const [activeConf, setActiveConf] = React.useState(sessionGetActiveConf())\n\n  const sw = new SessionWallet(conf[activeConf].network)\n\n\n  const [sessionWallet, setSessionWallet] =  React.useState(sw)\n  const [accts, setAccounts] = React.useState(sw.accountList())\n  const [connected, setConnected] = React.useState(sw.connected())\n\n  function updateWallet(sw: SessionWallet){ \n    setSessionWallet(sw)\n    setAccounts(sw.accountList())\n    setConnected(sw.connected())\n  }\n\n  function selectNetwork(idx: number){ \n    sessionSetActiveConf(idx)\n    setActiveConf(idx) \n  }\n\n  let collectionLink = <div></div>\n  if(connected){\n    collectionLink = <AnchorButton minimal={true} icon='folder-open' href={'/collection/'+sw.getDefaultAccount()} text='Collection' />\n  }\n  return (\n    <Router>\n      <div className=\"App\">\n        <Navbar>\n        <Navbar.Group align={Alignment.LEFT}>\n          <Navbar.Heading>ARC3.xyz</Navbar.Heading>\n          <Navbar.Divider />\n          <AnchorButton minimal={true} icon='git-branch' href='https://github.com/barnjamin/arc3.xyz' text='Github' />\n          <AnchorButton minimal={true} icon='clean' href='/mint' text='Mint' />\n          {collectionLink}\n        </Navbar.Group>\n        <Navbar.Group  align={Alignment.RIGHT}>\n          <NetworkSelector activeConf={activeConf} selectNetwork={selectNetwork} />\n\n          <AlgorandWalletConnector  \n            darkMode={false}\n            sessionWallet={sessionWallet}\n            accts={accts}\n            connected={connected} \n            updateWallet={updateWallet}\n          />\n\n        </Navbar.Group>\n        </Navbar>\n        <Switch>\n          <Route exact path=\"/\" children={<Minter  activeConf={activeConf} sw={sessionWallet}></Minter>} />\n          <Route exact path=\"/mint\" children={ <Minter  activeConf={activeConf} sw={sessionWallet}></Minter> }/>\n          <Route path=\"/nft/:assetId\" children={ <NFTViewer activeConf={activeConf}  sw={sessionWallet} /> }/>\n          <Route path=\"/collection/:address\" children={ <Collection  activeConf={activeConf} sw={sessionWallet} /> }/>\n        </Switch>\n      </div>\n    </Router>\n  );\n\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nimport {createBrowserHistory} from \"history\"\n\nconst history = createBrowserHistory();\n\nReactDOM.render(\n  <React.StrictMode>\n    <App history={history} />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}