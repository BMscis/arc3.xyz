{"version":3,"sources":["lib/algorand.ts","lib/ipfs.ts","lib/validator.ts","lib/nft.ts","lib/config.ts","lib/metadata.ts","Minter.tsx","AlgorandWalletConnector.tsx","MediaDisplay.tsx","NFTViewer.tsx","Collection.tsx","NetworkSelector.tsx","App.tsx","index.tsx"],"names":["getClient","activeConf","ac","conf","token","algodToken","host","algod","port","algodPort","algosdk","Algodv2","setOrUndef","addr","undefined","createToken","wallet","md","getDefaultAccount","getSuggested","suggested","create_txn","makeAssetCreateTxnWithSuggestedParamsFromObject","from","assetName","name","unitName","assetURL","url","assetMetadataHash","toHash","manager","reserve","clawback","freeze","total","Math","pow","decimals","defaultFrozen","suggestedParams","signTxn","create_txn_s","sendWait","result","rounds","getTransactionParams","do","txParams","lastRound","getToken","assetId","getAssetByID","getCollection","address","a","accountInformation","results","plist","push","console","log","Promise","all","assets","collectionRequests","map","NFT","fromToken","signed","client","sendRawTransaction","t","blob","txId","waitForConfirmation","error","putToIPFS","file","storage","Web3Storage","endpoint","put","wrapWithDirectory","mediaAdded","ipfsURL","mediaType","image","animation_url","toFile","getMimeTypeFromIpfs","req","Request","method","fetch","resp","headers","get","getMetaFromIpfs","body","text","parsed","JSON","parse","Metadata","validators","nft","urlMimeType","JSON_TYPE","metadataHash","Buffer","metadata","toString","validArc3","valid","validateArc3","length","tests","k","pass","ARC3_URL_SUFFIX","METADATA_FILE","asaURL","cid","resolveProtocol","reserveAddr","endsWith","slice","chunks","split","startsWith","cidComponents","cidCodecCode","cidVersion","cidCodec","asaField","cidHash","decodeAddress","mhdigest","digest","mfsha2","code","publicKey","CID","create","parseInt","join","ipfsGateway","mediaIntegrity","arrayBuffer","buff","bytes","Uint8Array","hash","sha256","Token","id","creator","this","p","params","index","small","mediaURL","substring","asset_id","fromAssetId","fromParams","require","getAddrUrl","idx","blockExplorer","getAsaUrl","activeConfKey","sessionGetActiveConf","sessionStorage","getItem","sessionSetActiveConf","setItem","getTypeFromMimeType","filetype","type","omitRawAndEmpty","v","args","_raw","description","image_integrity","image_mimetype","background_color","external_url","external_url_integrity","external_url_mimetype","animation_url_integrity","animation_url_mimetype","extra_metadata","localization","properties","Object","assign","fmt","hasOwnProperty","update","md_blob","Blob","File","stringify","mimeType","Minter","props","history","useHistory","React","meta","setMeta","loading","setLoading","mediaSrc","setMediaSrc","fileObj","setFileObj","extraProps","setExtraProps","extraPropsVisible","setExtraPropsVisible","extraParamsVisible","setExtraParamsVisible","setCID","isMinting","setIsMinting","setToken","captureMetadata","alert","handleSetTokenParams","e","tgt","target","value","checked","handleExtraPropUpdate","dataset","handleSetMyAddress","label","sw","eprops","reduce","ep","integ","className","elevation","Elevation","TWO","Uploader","setFile","reader","FileReader","onload","readAsDataURL","metaObj","size","helperText","labelFor","labelInfo","placeholder","onChange","rows","cols","event","onClick","minimal","outlined","large","isOpen","inline","defaultValue","min","max","fill","onValueChange","rightElement","intent","icon","splice","handleExtraPropRemove","rightIcon","MintDialog","handleSetNFT","handleCancelMint","MediaDisplay","controls","src","alt","disabled","onInputChange","stopPropagation","preventDefault","files","item","isLoading","setIsLoading","title","Classes","DIALOG_BODY","DIALOG_FOOTER","DIALOG_FOOTER_ACTIONS","AlgorandWalletConnector","selectorOpen","setSelectorOpen","sessionWallet","updateWallet","handleSelectedWallet","choice","currentTarget","allowedWallets","disconnect","SessionWallet","network","permissionCallback","connect","interval","connected","then","success","setInterval","clearInterval","walletOptions","entries","img","darkMode","displayName","onClose","addr_list","accts","substr","setAccountIndex","iconProps","accountIndex","media","NFTViewer","useParams","setNFT","loaded","setLoaded","subscribed","mdProps","language","style","docco","wrapLongLines","arc3Invalids","test","rel","href","THREE","Collection","collection","setCollection","nfts","filter","NetworkSelector","network_list","cfg","selectNetwork","App","URLSearchParams","location","search","findIndex","useState","setActiveConf","setSessionWallet","accountList","setAccounts","setConnected","collectionLink","Group","align","Alignment","LEFT","Heading","Divider","RIGHT","exact","path","children","createBrowserHistory","ReactDOM","render","StrictMode","window","document","getElementById"],"mappings":"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","file":"static/js/main.0a9e30d9.chunk.js","sourcesContent":["import { Wallet } from 'algorand-session-wallet';\nimport algosdk, {Algodv2, makeAssetCreateTxnWithSuggestedParamsFromObject} from 'algosdk'\nimport { NFT, Token } from './nft';\nimport { Metadata } from './metadata'\nimport { conf } from './config'\n\nfunction getClient(activeConf: number): Algodv2 {\n  const ac = conf[activeConf]\n  const token = ac.algodToken?ac.algodToken:\"\"\n  const host = ac.algod?ac.algod:\"\"\n  const port = ac.algodPort?ac.algodPort:0\n  return new algosdk.Algodv2(token, host, port)\n}\n\nfunction setOrUndef(addr: string): string | undefined {\n  return addr===\"\"?undefined:addr\n}\n\nexport async function createToken(wallet: Wallet, activeConf: number, token: Token, md: Metadata): Promise<number> {\n    const addr      = wallet.getDefaultAccount()\n    const suggested = await getSuggested(activeConf, 100)\n\n    const create_txn =  makeAssetCreateTxnWithSuggestedParamsFromObject({\n        from: addr,\n        assetName: md.name,\n        unitName: md.unitName,\n        assetURL: token.url,\n        assetMetadataHash: md.toHash(),\n        manager: setOrUndef(token.manager),\n        reserve: setOrUndef(token.reserve),\n        clawback: setOrUndef(token.clawback),\n        freeze: setOrUndef(token.freeze),\n        total: Math.pow(10, token.decimals),\n        decimals: token.decimals,\n        defaultFrozen: token.defaultFrozen,\n        suggestedParams: suggested\n    })\n\n    const [create_txn_s]  = await wallet.signTxn([create_txn])\n\n    const result = await sendWait(activeConf, [create_txn_s])\n    return result['asset-index']\n}\n\nexport async function getSuggested(activeConf: number, rounds: number) {\n    const txParams = await getClient(activeConf).getTransactionParams().do();\n    return { ...txParams, lastRound: txParams['firstRound'] + rounds }\n}\n\nexport async function getToken(activeConf: number, assetId: number): Promise<any> {\n  return await getClient(activeConf).getAssetByID(assetId).do()\n}\n\nexport async function getCollection(activeConf: number, address: string): Promise<any[]> {\n  const results = await getClient(activeConf).accountInformation(address).do()\n\n  const plist = []\n  for(const a in results['assets']){\n    if(results['assets'][a]['amount']>0)\n      plist.push(getToken(activeConf, results['assets'][a]['asset-id']))\n  }\n\n  console.log(results)\n  console.log(plist)\n\n  const assets = await Promise.all(plist)\n  const collectionRequests = assets.map((a)=>{ return NFT.fromToken(activeConf, a) })\n  return Promise.all(collectionRequests)\n}\n\nexport async function sendWait(activeConf: number, signed: any[]): Promise<any> {\n    const client = getClient(activeConf)\n    try {\n        const {txId} = await client.sendRawTransaction(signed.map((t)=>{return t.blob})).do()\n        const result = await algosdk.waitForConfirmation(client, txId, 3)\n        return result \n    } catch (error) { \n        console.error(error)\n    }\n\n    return undefined \n}","import { ipfsURL } from './nft'\nimport {Metadata} from './metadata'\n\n/*\n Currently an issue with resolving ipfs-car module in web3.storage when using react-scripts\n We just use the prebuilt one but with no types we have to just ignore the issue for now\n//import { Web3Storage } from 'web3.storage'\n*/\n// @ts-ignore\nimport { Web3Storage } from 'web3.storage/dist/bundle.esm.min.js'\n\n\nexport async function putToIPFS(activeConf: number, file: File, md: Metadata): Promise<string> {\n    // Uncomment this line after you've set your storage token\n    //const storage = new Web3Storage({token: conf[activeConf].storageToken})\n\n    // We hide the token for this site behind a cloudflare worker so no sneaky petes can delete our precious files\n    const storage = new Web3Storage({token: \" \", endpoint:\"https://worker.barnji.workers.dev\"})\n    const mediaAdded = await storage.put([file], {wrapWithDirectory: false})\n    ipfsURL(mediaAdded)\n    switch(md.mediaType(false)){\n        case 'image':\n            md.image = ipfsURL(mediaAdded)\n            break\n        case 'audio':\n            md.animation_url = ipfsURL(mediaAdded)\n            break\n        case 'video':\n            md.animation_url = ipfsURL(mediaAdded)\n            break\n    }\n\n    return await storage.put([md.toFile()], {wrapWithDirectory: false})\n}\n\n\nexport async function getMimeTypeFromIpfs(url: string): Promise<string> {\n    const req = new Request(url, { method:\"HEAD\" })\n    const resp = await fetch(req)\n    return resp.headers.get(\"Content-Type\")\n}\n\n\nexport async function getMetaFromIpfs(url: string): Promise<Metadata> {\n    const req = new Request(url)\n    const resp = await fetch(req)\n    const body = await resp.blob()\n    const text = await body.text()\n    const parsed = JSON.parse(text)\n    return new Metadata({\"_raw\":text, ...parsed}) \n}\n\n\n","import {NFT, JSON_TYPE} from './nft'\n\nfunction mdurl(nft: NFT): boolean {\n    return nft.urlMimeType === JSON_TYPE \n}\n\nfunction mdhash(nft: NFT): boolean {\n    return nft.token.metadataHash === Buffer.from(nft.metadata.toHash(true)).toString(\"base64\") ||\n            nft.token.metadataHash === Buffer.from(nft.metadata.toHash()).toString(\"base64\")\n}\n\nfunction total(nft: NFT): boolean {\n    return (nft.token.total / Math.pow(10, nft.token.decimals)) === 1\n}\n\n// TODO: Check that metadata contains correct fields\n// TODO: Check that integrity hashes are valid\n\nconst validators = {\n    \"URL Points to metadata\": mdurl,\n    \"Metadata Hash matches\":mdhash,\n    \"Total Supply Is 1\": total,\n}\n\n\nexport function validArc3(nft: NFT): boolean {\n    if(!nft.valid()) return false\n\n    return validateArc3(nft).length === 0\n}\n\ninterface Arc3Test {\n    name: string\n    pass: boolean\n}\n\nexport function validateArc3(nft: NFT): Arc3Test[] {\n    const tests = []\n    for(const k in validators){\n        tests.push({name:k,pass:validators[k](nft)})\n    }\n    return tests \n}","import { createToken, getToken } from './algorand'\nimport { getMetaFromIpfs, getMimeTypeFromIpfs } from './ipfs'\nimport { sha256 } from 'js-sha256'\nimport { Wallet } from 'algorand-session-wallet'\nimport { conf } from './config'\nimport { Metadata } from './metadata'\nimport { decodeAddress } from 'algosdk'\nimport { CID } from 'multiformats/cid'\nimport * as mfsha2 from 'multiformats/hashes/sha2'\nimport * as digest from 'multiformats/hashes/digest'\nimport { CIDVersion } from 'multiformats/types/src/cid'\n// import { CIDVersion } from 'multiformats'\n\n/*\n\nThe following is a class and metadata type to support the ARC-0003 standard\nset forth by the Algorand Foundation and Community\n\nhttps://github.com/algorandfoundation/ARCs/blob/main/ARCs/arc-0003.md\n\n*/\n\nexport const ARC3_NAME_SUFFIX = '@arc3'\nexport const ARC3_URL_SUFFIX = '#arc3'\nexport const METADATA_FILE = 'metadata.json'\nexport const JSON_TYPE = 'application/json'\n\nexport function asaURL (cid: string): string { return ipfsURL(cid) + ARC3_URL_SUFFIX }\n\nexport function ipfsURL (cid: string): string { return 'ipfs://' + cid }\n\nexport function fileURL (activeConf: number, cid: string, name: string): string { return conf[activeConf].ipfsGateway + cid + '/' + name }\n\nexport function resolveProtocol (activeConf: number, url: string, reserveAddr: string): string {\n\n    if (url.endsWith(ARC3_URL_SUFFIX))\n        url = url.slice(0, url.length - ARC3_URL_SUFFIX.length)\n\n    let chunks = url.split('://')\n    console.log('resolve protocol:', url)\n    console.log(chunks)\n    // Check if prefix is template-ipfs and if {ipfscid:..} is where CID would normally be\n    if (chunks[0] === 'template-ipfs' && chunks[1].startsWith('{ipfscid:')) {\n        // Look for something like: template:ipfs://{ipfscid:1:raw:reserve:sha2-256} and parse into components\n        chunks[0] = 'ipfs'\n        const cidComponents = chunks[1].split(':')\n        if (cidComponents.length !== 5) {\n            // give up\n            console.log('unknown ipfscid format')\n            return url\n        }\n        const [, cidVersion, cidCodec, asaField, cidHash] = cidComponents\n\n        // const cidVersionInt = parseInt(cidVersion) as CIDVersion\n        if (cidHash.split('}')[0] !== 'sha2-256') {\n            console.log('unsupported hash:', cidHash)\n            return url\n        }\n        if (cidCodec !== 'raw' && cidCodec !== 'dag-pb') {\n            console.log('unsupported codec:', cidCodec)\n            return url\n        }\n        if (asaField !== 'reserve') {\n            console.log('unsupported asa field:', asaField)\n            return url\n        }\n        let cidCodecCode\n        if (cidCodec === 'raw') {\n            cidCodecCode = 0x55\n        } else if (cidCodec === 'dag-pb') {\n            cidCodecCode = 0x70\n        }\n\n        // get 32 bytes Uint8Array reserve address - treating it as 32-byte sha2-256 hash\n        const addr = decodeAddress(reserveAddr)\n        const mhdigest = digest.create(mfsha2.sha256.code, addr.publicKey)\n\n        const cid = CID.create(parseInt(cidVersion) as CIDVersion, cidCodecCode, mhdigest)\n        console.log('switching to id:', cid.toString())\n        chunks[1] = cid.toString() + '/' + chunks[1].split('/').slice(1).join('/')\n        console.log('redirecting to ipfs:', chunks[1])\n    }\n\n    // No protocol specified, give up\n    if (chunks.length < 2) return url\n\n    //Switch on the protocol\n    switch (chunks[0]) {\n        case 'ipfs': //Its ipfs, use the configured gateway\n            return conf[activeConf].ipfsGateway + chunks[1]\n        case 'https': //Its already http, just return it\n            return url\n        // TODO: Future options may include arweave or algorand\n    }\n\n    return url\n}\n\nexport async function mediaIntegrity (file: File): Promise<string> {\n    const buff = await file.arrayBuffer()\n    const bytes = new Uint8Array(buff)\n    const hash = new Uint8Array(sha256.digest(bytes))\n    return 'sha256-' + Buffer.from(hash).toString('base64')\n}\n\nexport class Token {\n    id: number\n\n    name: string\n    unitName: string\n    url: string\n\n    metadataHash: string\n\n    total: number\n    decimals: number\n\n    creator: string\n\n    manager: string\n    reserve: string\n    clawback: string\n    freeze: string\n\n    defaultFrozen: boolean\n\n    constructor (t: any) {\n        this.id = t.id || 0\n        this.name = t.name || ''\n        this.unitName = t.unitName || ''\n        this.url = t.url || ''\n\n        this.metadataHash = t.metadataHash || ''\n\n        this.total = t.total || 0\n        this.decimals = t.decimals || 0\n\n        this.creator = t.creator || ''\n\n        this.manager = t.manager || ''\n        this.reserve = t.reserve || ''\n        this.clawback = t.clawback || ''\n        this.freeze = t.freeze || ''\n\n        this.defaultFrozen = t.defaultFrozen || false\n    }\n\n    static fromParams (t: any): Token {\n        const p = t.params\n        return new Token({\n            id: t.index,\n            name: p.name || '',\n            unitName: p['unit-name'] || '',\n            url: p.url || '',\n            metadataHash: p['metadata-hash'] || '',\n            total: p.total || 0,\n            decimals: p.decimals || 0,\n            creator: p.creator || '',\n            manager: p.manager || '',\n            reserve: p.reserve || '',\n            clawback: p.clawback || '',\n            freeze: p.freeze || '',\n            defaultFrozen: p['default-frozen'] || false,\n        }) as Token\n\n    }\n\n    valid (): boolean {\n        return this.id > 0 && this.total > 0 && this.url !== ''\n    }\n\n}\n\nexport class NFT {\n    token: Token = new Token({})\n    metadata: Metadata = new Metadata()\n\n    urlMimeType: string\n\n    constructor (md: Metadata, token?: Token, urlMimeType?: string) {\n        this.metadata = md\n        this.token = token\n        this.urlMimeType = urlMimeType\n    }\n\n    static async create (wallet: Wallet, activeConf: number, token: Token, md: Metadata, cid: string): Promise<NFT> {\n        token.url = asaURL(cid)\n        const asset_id = await createToken(wallet, activeConf, token, md)\n        return await NFT.fromAssetId(activeConf, asset_id)\n    }\n\n    static async fromAssetId (activeConf: number, assetId: number): Promise<NFT> {\n        return NFT.fromToken(activeConf, await getToken(activeConf, assetId))\n    }\n\n    static async fromToken (activeConf: number, t: any): Promise<NFT> {\n        const token = Token.fromParams(t)\n        const url = resolveProtocol(activeConf, token.url, token.reserve)\n\n        //TODO: provide getters for other storage options\n        // arweave? note field?\n\n        try {\n            const urlMimeType = await getMimeTypeFromIpfs(url)\n\n            switch (urlMimeType) {\n                case JSON_TYPE:\n                    return new NFT(await getMetaFromIpfs(url), token, urlMimeType)\n            }\n\n            return new NFT(Metadata.fromToken(token), token, urlMimeType)\n        } catch (error) {\n            return new NFT(new Metadata(), token)\n        }\n    }\n\n    valid (): boolean {\n        return this.token.valid() && this.metadata.valid()\n    }\n\n    name (): string {\n        if (this.metadata.valid()) {\n            return this.metadata.name\n        }\n        if (this.token.valid()) {\n            return this.token.name\n        }\n        return ''\n    }\n\n    id (): number {\n        return this.token.valid() ? this.token.id : 0\n    }\n\n    mediaURL (activeConf: number, small: boolean): string {\n        if (!this.valid()) return 'https://dummyimage.com/640x360/fff/aaa'\n\n        // Try to resolve the protocol, if one is set\n        const url = resolveProtocol(activeConf, this.metadata.mediaURL(small), this.metadata.reserve)\n\n        // If the url is different, we resolved it correctly\n        if (url !== this.metadata.mediaURL(small)) return url\n\n        // It may be a relative url stored within the same directory as the metadata file\n        // Lop off the METADATA_FILE bit and append image path\n        if (this.token.url.endsWith(METADATA_FILE)) {\n            const dir = this.token.url.substring(0, this.token.url.length - METADATA_FILE.length)\n            return resolveProtocol(activeConf, dir, this.metadata.reserve) + this.metadata.mediaURL(small)\n        }\n\n        // give up\n        return url\n    }\n}\n","type Config = {\n    storageToken: string;   // Storage token for web3.storage\n    network: string;        // The network to use for creating nfts\n    ipfsGateway: string;    // The IPFS gateway url for retrieving files\n    algod: string;          // The Algod api url to use\n    algodPort: number;      // The algod api port to use\n    algodToken: string;     // the algod token to use\n    blockExplorer: string; // The Block Explorer to allow linking out to\n}\n\nexport const conf = require(\"../config.json\") as Config[];\n\nexport function getAddrUrl(idx: number, addr: string): string {\n    return conf[idx].blockExplorer + \"address/\" + addr\n}\nexport function getAsaUrl(idx: number, id: number): string {\n    return conf[idx].blockExplorer + \"asset/\" + id\n}\n\nconst activeConfKey = \"active-conf\"\nexport function sessionGetActiveConf(): number {\n    const ac = sessionStorage.getItem(activeConfKey)\n    if(ac === undefined || ac === null) return 0\n    return parseInt(ac)\n}\n\nexport function sessionSetActiveConf(ac: number)  {\n    sessionStorage.setItem(activeConfKey, ac.toString())\n}\n","import {Token, JSON_TYPE, METADATA_FILE} from './nft'\nimport { sha256 } from 'js-sha256'\n\nexport type Properties = {\n    [key: string]: string | number\n}\n\nexport type LocalizationIntegrity = {\n    [key: string]: string\n}\n\nexport type Localization = {\n    uri: string\n    default: string\n    locales: string[]\n    integrity?: LocalizationIntegrity\n}\n\n// Just takes the first chunk of the mimetype (the type)\nexport function getTypeFromMimeType(filetype: string): string {\n    const [type, _] = filetype.split(\"/\")\n    return type\n}\n\nfunction omitRawAndEmpty(k,v){\n    if(k === \"_raw\") return undefined;\n    if(v === \"\") return undefined;\n    return v\n}\n\nexport class Metadata {\n    _raw: string = undefined\n\n    name: string = \"\"\n    description: string = \"\"\n\n    image: string = \"\"\n    decimals?: number = 0\n    unitName?: string = \"\"\n\n    image_integrity?: string = \"\"\n    image_mimetype?: string = \"\"\n\n    reserve?: string = \"\"\n\n    background_color?: string = \"\"\n\n    external_url?: string = \"\"\n    external_url_integrity?: string = \"\"\n    external_url_mimetype?: string = \"\"\n\n    animation_url?: string = \"\"\n    animation_url_integrity?: string = \"\"\n    animation_url_mimetype?: string = \"\"\n\n    extra_metadata?: string = \"\"\n\n    localization?: Localization\n\n    properties?: Properties\n\n    constructor(args: any = {}) { Object.assign(this, args) }\n\n    toHash(fmt: Boolean = false): Uint8Array {\n        if(this.hasOwnProperty(\"extra_metadata\")){\n            //TODO\n            //am = SHA-512/256(\"arc0003/am\" || SHA-512/256(\"arc0003/amj\" || content of JSON metadata file) || e)\n        }\n\n        if(this._raw === undefined)\n            this._raw = this.toString(false)\n\n        const hash = sha256.create();\n        fmt ? hash.update(this.toString(false)):hash.update(this._raw);\n        return new Uint8Array(hash.digest())\n    }\n\n    valid(): boolean {\n        return this.image !== \"\" || this.animation_url !== \"\" || this.external_url !== \"\"\n    }\n\n    toFile(): File {\n        const md_blob = new Blob([this.toString()], { type: JSON_TYPE })\n        return new File([md_blob], METADATA_FILE)\n    }\n\n    toString(fmt: Boolean = false): string {\n        if(this._raw === undefined) this._raw = JSON.stringify({...this}, omitRawAndEmpty)\n        return JSON.stringify(JSON.parse(this._raw) , omitRawAndEmpty, fmt?2:0)\n    }\n\n    mimeType(small: boolean): string {\n        if(small) return this.image_mimetype\n\n        if(this.animation_url !== \"\") return this.animation_url_mimetype;\n        if(this.external_url_mimetype !== \"\") return this.external_url_mimetype;\n\n        return this.image_mimetype\n    }\n\n    mediaType(small: boolean): string {\n        return getTypeFromMimeType(this.mimeType(small))\n    }\n\n    mediaURL(small: boolean): string {\n        if(this.animation_url !== \"\" && !small) {\n            return this.animation_url\n        }\n        return this.image\n    }\n\n    static fromToken(t: Token){\n        return new Metadata({name:t.name, image: t.url, decimals: t.decimals, reserve: t.reserve })\n    }\n\n}\n","import * as React from 'react'\nimport { InputGroup, Button, Elevation, FileInput, Card, Dialog, Classes, Collapse, NumericInput, FormGroup, Switch } from \"@blueprintjs/core\"\nimport {  NFT, Token, mediaIntegrity } from './lib/nft'\nimport {Metadata} from './lib/metadata'\nimport { SessionWallet } from 'algorand-session-wallet'\nimport { putToIPFS } from './lib/ipfs'\nimport{ useHistory } from 'react-router-dom'\nimport { getTypeFromMimeType } from './lib/metadata'\n\nexport type MinterProps = {\n    activeConf: number\n    sw: SessionWallet\n}\n\nexport function Minter(props: MinterProps){\n\n    const history = useHistory()\n\n    const [meta, setMeta]               = React.useState(new Metadata())\n    const [loading, setLoading]         = React.useState(false)\n    const [mediaSrc, setMediaSrc]           = React.useState<string>();\n    const [fileObj, setFileObj]         = React.useState<File>();\n\n    const [extraProps, setExtraProps]   = React.useState([])\n    const [extraPropsVisible, setExtraPropsVisible] = React.useState(false)\n\n    const [extraParamsVisible, setExtraParamsVisible] = React.useState(false)\n\n    // For MintDialog\n    const [cid, setCID]                 = React.useState(\"\")\n    const [isMinting, setIsMinting]     = React.useState(false)\n\n    const [token, setToken]             = React.useState(new Token({}))\n\n    function setFile(file: File) {\n        setFileObj(file)\n\n        const reader = new FileReader();\n        reader.onload = (e: any) => {  setMediaSrc(e.target.result) }\n        reader.readAsDataURL(file);\n\n        setMeta((meta)=>{\n            const metaObj = {\n                ...meta,\n                properties:{...meta.properties, size:file.size}\n            }\n\n            switch(getTypeFromMimeType(file.type)){\n                case 'audio':\n                    metaObj.animation_url = file.name\n                    metaObj.animation_url_mimetype = file.type\n                    break;\n                case 'video':\n                    metaObj.animation_url = file.name\n                    metaObj.animation_url_mimetype = file.type\n                    break;\n                case 'image':\n                    metaObj.image = file.name\n                    metaObj.image_mimetype = file.type\n                    break;\n            }\n\n            return new Metadata(metaObj)\n        })\n    }\n\n\n    async function mintNFT() {\n        setLoading(true) \n\n        const md = await captureMetadata()\n        setMeta(md)\n        try {\n            const cid = await putToIPFS(props.activeConf, fileObj, md)\n            setCID(cid)\n            setIsMinting(true)\n        } catch (error) {\n            alert(\"Failed to upload media to ipfs :(\")\n            setLoading(false)\n            return\n        }\n\n    }\n\n    function handleCancelMint(){\n        setIsMinting(false)\n        setLoading(false)\n    }\n\n    function handleSetNFT(nft: NFT){ return history.push(\"/nft/\"+nft.token.id) }\n\n    function handleChangeDecimals(v: number){ setToken((token)=>{ return new Token({...token, \"decimals\":v}) }) }\n    function handleSetTokenParams(e) {\n        const tgt = e.target\n        const name = e.target.id\n        const value = tgt.type === \"checkbox\" ? tgt.checked: tgt.value as string \n        setToken((token)=>{ return new Token({...token, [name]:value}) })\n    }\n\n    function handleChangeMeta(event: { target: any; }) {\n        const target = event.target\n        const name = target.name as string\n        const value = target.type === 'checkbox' ? target.checked : target.value as string\n        setMeta((meta)=>{ return  new Metadata({...meta, [name]:value}) })\n    }\n\n    function handleShowExtraProps(){ setExtraPropsVisible(!extraPropsVisible) }\n    function handleShowExtraParams(){ setExtraParamsVisible(!extraParamsVisible) }\n    function handleExtraPropRemove(idx: number) { extraProps.splice(idx, 1); setExtraProps([...extraProps]) }\n    function handleAddExtraProp() { setExtraProps([...extraProps, emptyExtraProp()]) }\n    function emptyExtraProp(){ return { name:\"\", value: \"\" } }\n    function handleExtraPropUpdate(e){\n        const idx=parseInt(e.target.dataset.id)\n        if(e.target.id===\"name\") extraProps[idx][e.target.id]=e.target.value\n        else extraProps[idx][e.target.id] = e.target.value\n        setExtraProps([...extraProps])\n    }\n\n\n    function handleSetMyAddress(label: string){\n        return (e)=>{\n            setToken((token)=>{ \n                const addr = props.sw.getDefaultAccount()\n                if(addr === \"\") alert(\"You need to connect you wallet before you can do this.\")\n                return new Token({...token, [label]: addr})\n            })\n        }\n    }\n\n\n    async function captureMetadata(): Promise<Metadata> {\n        const eprops = extraProps.reduce((all, ep)=>{ return {...all, [ep.name]:ep.value} }, {})\n        const integ = await mediaIntegrity(fileObj)\n\n        const md = {\n            ...meta,\n            name:           token.name,\n            unitName:       token.unitName,\n            decimals:       token.decimals,\n            description:    meta.description,\n            properties:     { ...eprops, ...meta.properties}\n        } as Metadata\n\n        switch(getTypeFromMimeType(meta.mediaType(false))) {\n            case 'image':\n                md.image_integrity = integ\n                break;\n            case 'audio':\n                md.animation_url_integrity = integ\n                break;\n            case 'video':\n                md.animation_url_integrity = integ\n                break;\n        }\n\n        return new Metadata(md)\n    }\n\n    return (\n        <div className='container'>\n            <Card elevation={Elevation.TWO} className='mint-card' >\n                <Uploader\n                    mediaSrc={mediaSrc}\n                    file={fileObj}\n                    setFile={setFile}\n                    {...meta} />\n\n                <div className='container' >\n                    <FormGroup \n                        helperText=\"The Name for this asset\"\n                        label=\"Name\"\n                        labelFor=\"name\"\n                        labelInfo=\"(required)\" >\n                        <InputGroup\n                            name='name'\n                            placeholder='Name'\n                            className='details-basic details-title bp3-InputGroup bp3-large'\n                            onChange={handleSetTokenParams}\n                            type='text'\n                            id='name'\n                            value={token.name} />\n                    </FormGroup>\n                    <FormGroup\n                        helperText=\"The Unit Name for this asset \"\n                        label=\"Unit Name\"\n                        labelFor=\"unitName\"\n                        labelInfo=\"(required)\" >\n                        <InputGroup\n                            name='unitName'\n                            placeholder='Unit Name'\n                            className='details-basic details-title bp3-InputGroup bp3-large'\n                            onChange={handleSetTokenParams}\n                            type='text'\n                            id='unitName'\n                            value={token.unitName} />\n                    </FormGroup>\n                </div>\n\n                <div className='container'>\n                    <FormGroup \n                        helperText=\"A description of this asset\"\n                        label=\"Description\"\n                        labelFor=\"description\"\n                        labelInfo=\"(required)\" >\n                        <textarea\n                            rows={10}\n                            cols={30}\n                            placeholder='Description'\n                            className='details-description bp3-InputGroup bp3-large'\n                            onChange={handleChangeMeta}\n                            name='description'\n                            id='description'\n                            value={meta.description} />\n                    </FormGroup>\n                </div>\n\n                <div className='container extra-param-dropdown'>\n                    <Button \n                        onClick={handleShowExtraParams}  \n                        minimal={true} \n                        outlined={true} \n                        large={true}\n                        text={extraParamsVisible?\"Hide extra parameters\":\"Show extra parameters\"} \n                    />\n                    <Collapse isOpen={extraParamsVisible}>\n                        <div className='container extra-param-list'>\n\n                        <FormGroup \n                            inline={true}\n                            helperText=\"A value of >0 is considered a 'Fractional NFT'\"\n                            label=\"Decimals\" labelFor=\"decimals\" >\n                            <NumericInput \n                                defaultValue={0} min={0} max={19} \n                                name='decimals'\n                                id='decimals' \n                                fill={true}\n                                onValueChange={handleChangeDecimals} />\n                        </FormGroup>\n\n                        <FormGroup\n                            inline={true}\n                            label=\"Default Frozen\" labelFor=\"default-frozen\" >\n                            <Switch large={true} name='default-frozen' id='defaultFrozen'  onChange={handleSetTokenParams} />\n                        </FormGroup>\n\n                        <FormGroup\n                            inline={true}\n                            helperText=\"The Manager Address for this asset\" \n                            label=\"Manager Address\" labelFor=\"manager\" >\n                            <InputGroup \n                            rightElement={<Button minimal={true} text='Me' onClick={handleSetMyAddress('manager')} />}\n                            value={token.manager}\n                            name='manager' id='manager'   type='text' onChange={handleSetTokenParams}/>\n                        </FormGroup>\n\n                        <FormGroup\n                            inline={true}\n                            helperText=\"The Reserve Address for this asset\" \n                            label=\"Reserve Address\" labelFor=\"reserve\" >\n                            <InputGroup \n                            rightElement={<Button minimal={true} text='Me' onClick={handleSetMyAddress('reserve')} />}\n                            value={token.reserve}\n                            name='reserve' id='reserve'   type='text'  onChange={handleSetTokenParams} />\n                        </FormGroup>\n\n                        <FormGroup\n                            inline={true}\n                            helperText=\"The Clawback Address for this asset\" \n                            label=\"Clawback Address\" labelFor=\"clawback\" >\n                            <InputGroup \n                            rightElement={<Button minimal={true} text='Me' onClick={handleSetMyAddress('clawback')} />}\n                            value={token.clawback}\n                            name='clawback' id='clawback'   type='text'  onChange={handleSetTokenParams} />\n                        </FormGroup>\n\n                        <FormGroup\n                            inline={true}\n                            helperText=\"The Freeze Address for this asset\" \n                            label=\"Freeze Address\" labelFor=\"freeze\" >\n                            <InputGroup \n                            rightElement={<Button minimal={true} text='Me' onClick={handleSetMyAddress('freeze')} />} value={token.freeze}\n                            name='freeze' id='freeze'  type='text'  onChange={handleSetTokenParams}/>\n                        </FormGroup>\n                        </div>\n\n                    </Collapse>\n                </div>\n\n                <div className='container extra-prop-dropdown'>\n                    <Button \n                        onClick={handleShowExtraProps}  \n                        minimal={true} \n                        outlined={true} \n                        large={true}\n                        text={extraPropsVisible?\"Hide extra props\":\"Show extra props\"} \n                    />\n                    <Collapse isOpen={extraPropsVisible} className='extra-prop-collapse'>\n                        <p>Add string keys and values</p>\n                        <ul className='extra-prop-list'>\n                        { \n                            extraProps.map((props, idx)=>{ \n                                return (\n                                <li className='extra-prop-item' key={idx} >\n                                    <div className='extra-prop-container'>\n                                        <InputGroup \n                                            id=\"name\" \n                                            data-id={idx}\n                                            name=\"name\" \n                                            value={props.name}  \n                                            onChange={handleExtraPropUpdate} \n                                            className='details-basic details-artist bp3-InputGroup bp3-large' />\n                                        <InputGroup \n                                            id=\"value\" \n                                            name=\"value\" \n                                            data-id={idx}\n                                            value={props.value} \n                                            onChange={handleExtraPropUpdate} \n                                            className='details-basic details-artist bp3-InputGroup bp3-large' />\n                                        <Button minimal={true} intent='danger' icon='cross' onClick={()=>{ handleExtraPropRemove(idx) }}  />\n                                    </div>\n                                </li>\n                                )\n                            })\n                        }\n                        </ul>\n                        <Button fill={true} icon='plus' intent='primary' minimal={true} onClick={handleAddExtraProp} className='extra-prop-add' />\n                    </Collapse>\n                </div>\n\n                <div className='container custom-note-field'>\n\n                </div>\n\n                <div className='container container-mint'>\n                    <Button loading={loading}\n                        onClick={mintNFT}\n                        rightIcon='clean'\n                        large={true}\n                        minimal={true}\n                        outlined={true}\n                        intent='success'\n                        text='Mint' />\n                </div>\n            </Card>\n            <MintDialog \n                activeConf={props.activeConf}\n                token={token}\n                isMinting={isMinting} \n                cid={cid} \n                md={meta} \n                sw={props.sw}  \n                handleSetNFT={handleSetNFT}\n                handleCancelMint={handleCancelMint} \n                ></MintDialog>\n        </div>\n    )\n\n}\n\n\ntype MediaDisplayProps = {\n    mimeType: string\n    mediaSrc: string | undefined\n}\n\nfunction MediaDisplay(props: MediaDisplayProps){\n    const [type, _] = props.mimeType.split(\"/\")\n\n    switch(type) {\n        case \"audio\":\n            return (\n                <audio id=\"uploaded-media\" controls>\n                    <source src={props.mediaSrc} type={props.mimeType} />\n                </audio>\n            )\n        case \"video\":\n            return (\n                <video id=\"uploaded-media\" controls>\n                    <source src={props.mediaSrc} type={props.mimeType} />\n                </video>\n            )\n        default:\n            return (\n                <img id=\"uploaded-media\" alt=\"NFT\" src={props.mediaSrc} />\n            )\n    }\n}\n\ntype UploaderProps = {\n    mediaSrc: string | undefined\n    file: File\n    setFile(f: File): void\n};\n\nfunction Uploader(props: UploaderProps) {\n    function captureFile(event: any) {\n        event.stopPropagation()\n        event.preventDefault()\n        props.setFile(event.target.files.item(0))\n    }\n\n    if (props.mediaSrc === undefined || props.mediaSrc === \"\" ) return (\n        <div className='container'>\n            <div className='content content-piece' >\n                <FileInput large={true} disabled={false} text=\"Choose file...\" onInputChange={captureFile} />\n            </div>\n        </div>\n    )\n\n\n\n    return (\n        <div className='container' >\n            <div className='content content-piece'>\n                <MediaDisplay mimeType={props.file.type} mediaSrc={props.mediaSrc} />\n            </div>\n        </div>\n    )\n}\n\ntype MintDialogProps = {\n    activeConf: number\n    isMinting: boolean\n    cid: string\n    md: Metadata\n    sw: SessionWallet\n    token: Token \n    handleSetNFT(NFT)\n    handleCancelMint()\n}\n\nfunction MintDialog(props: MintDialogProps){\n    const [isLoading, setIsLoading] = React.useState(false)\n\n    function cancel(){\n        setIsLoading(false)\n        props.handleCancelMint()\n    }\n\n    async function mint(){\n        try {\n            setIsLoading(true)\n            const nft = await NFT.create(props.sw.wallet, props.activeConf, props.token, props.md, props.cid)\n            setIsLoading(false)\n            props.handleSetNFT(nft)\n        } catch (error) {\n           alert(\"Failed to create nft: \"+error) \n           setIsLoading(false)\n           props.handleCancelMint()\n        }\n    }\n\n    return (\n        <Dialog isOpen={props.isMinting} title=\"Mint it\" >\n            <div className={Classes.DIALOG_BODY}>\n                <p>File uploaded to ipfs {props.md.mediaURL(false)} </p>\n                <p>Click \"Mint\" to create ASA</p>\n            </div>\n            <div className={Classes.DIALOG_FOOTER}>\n                <div className={Classes.DIALOG_FOOTER_ACTIONS}>\n                    <Button loading={isLoading} onClick={cancel}>Cancel</Button>\n                    <Button loading={isLoading} onClick={mint}>Mint</Button>\n                </div>\n            </div>\n        </Dialog>\n    )\n}","import * as React from 'react'\n\nimport { SessionWallet, allowedWallets } from 'algorand-session-wallet'\n\nimport { Dialog, Button, Classes, HTMLSelect, Intent } from '@blueprintjs/core'\nimport { IconName } from '@blueprintjs/icons'\n\n\ntype AlgorandWalletConnectorProps = {\n    darkMode: boolean\n    connected: boolean\n    accts: string[]\n    sessionWallet: SessionWallet\n    updateWallet(sw: SessionWallet): void\n}\n\nexport default function AlgorandWalletConnector(props:AlgorandWalletConnectorProps)  {\n\n    const [selectorOpen, setSelectorOpen] = React.useState(false)\n\n    const {sessionWallet,updateWallet} = props\n    React.useEffect(()=>{\n        if(sessionWallet.connected()) return\n\n        let interval: any\n        sessionWallet.connect().then((success)=>{\n            if(!success) return\n\n            // Check every 500ms to see if we've connected then kill the interval\n            // This is most useful in the case of walletconnect where it may be several \n            // seconds before the user connects\n            interval = setInterval(()=>{\n                if(sessionWallet.connected()) {\n                    clearInterval(interval)\n                    updateWallet(sessionWallet)\n                }\n            }, 500)\n\n        })\n\n        return ()=>{ clearInterval(interval) }\n\n    }, [sessionWallet, updateWallet])\n\n\n    function disconnectWallet() { \n        props.sessionWallet.disconnect()\n        props.updateWallet(new SessionWallet(props.sessionWallet.network, props.sessionWallet.permissionCallback)) \n    }\n\n    function handleDisplayWalletSelection() { setSelectorOpen(true) }\n\n    async function handleSelectedWallet(e: any) {\n        const choice = e.currentTarget.id\n\n        if(!(choice in allowedWallets)) {\n            if(props.sessionWallet.wallet !== undefined) props.sessionWallet.disconnect()\n            return setSelectorOpen(false)\n        }\n\n        const sw = new SessionWallet(props.sessionWallet.network, props.sessionWallet.permissionCallback, choice)\n\n        if(!await sw.connect()) {\n            sw.disconnect()\n        }\n\n        props.updateWallet(sw)\n\n        setSelectorOpen(false)\n    }\n\n    function handleChangeAccount(e: any) {\n        props.sessionWallet.setAccountIndex(parseInt(e.target.value))\n        props.updateWallet(props.sessionWallet)\n    }\n\n    const walletOptions = []\n    for(const [k,v] of Object.entries(allowedWallets)){\n        if(k === 'insecure-wallet') continue\n        walletOptions.push((\n        <li key={k}>\n            <Button id={k}\n                large={true} \n                fill={true} \n                minimal={true} \n                outlined={true} \n                onClick={handleSelectedWallet}\n                > \n                <div className='wallet-option'>\n                    <img alt='wallet-branding' className='wallet-branding' src={  v.img(props.darkMode)} />\n                    <h5>{v.displayName()}</h5>\n                </div>\n                </Button>\n        </li>\n        ))\n    }\n\n    if (!props.connected) return (\n        <div>\n            <Button\n                minimal={true}\n                rightIcon='selection'\n                intent='warning'\n                outlined={true}\n                onClick={handleDisplayWalletSelection}>Connect Wallet</Button>\n\n            <Dialog isOpen={selectorOpen} title='Select Wallet' onClose={handleSelectedWallet} >\n                <div className={Classes.DIALOG_BODY}>\n                    <ul className='wallet-option-list'>\n                        {walletOptions}\n                    </ul>\n                </div>\n            </Dialog>\n        </div>\n    )\n\n\n    const addr_list = props.accts.map((addr, idx) => {\n        return (<option value={idx} key={idx}> {addr.substr(0, 8)}...  </option>)\n    })\n\n    const iconprops = { \n        icon: 'symbol-circle' as IconName, \n        intent: 'success'  as Intent\n    }\n\n    return (\n        <div>\n            <HTMLSelect \n                onChange={handleChangeAccount} \n                minimal={true} \n                iconProps={iconprops} \n                defaultValue={props.sessionWallet.accountIndex()} >\n                {addr_list}\n            </HTMLSelect>\n            <Button icon='log-out' minimal={true} onClick={disconnectWallet} ></Button>\n        </div>\n    )\n}","import { getTypeFromMimeType } from \"./lib/metadata\"\n\ntype MediaDisplayProps = {\n    mimeType: string\n    mediaSrc: string | undefined\n}\n\nexport function MediaDisplay(props: MediaDisplayProps){\n    const type = getTypeFromMimeType(props.mimeType)\n\n    let media = <div></div>\n    switch(type) {\n        case \"audio\":\n           media = (\n                <audio id=\"uploaded-media\" controls>\n                    <source src={props.mediaSrc} type={props.mimeType} />\n                </audio>\n            )\n            break;\n        case \"video\":\n            media = (\n                <video id=\"uploaded-media\" controls>\n                    <source src={props.mediaSrc} type={props.mimeType} />\n                </video>\n            )\n            break;\n        default:\n            media = (\n                <img id=\"uploaded-media\" alt=\"NFT\" src={props.mediaSrc} />\n            )\n    }\n\n    return (\n        <div className='media-display content' >\n            {media}\n        </div>\n    )\n}","import * as React from 'react'\nimport { Elevation, Card, Icon } from \"@blueprintjs/core\"\nimport { NFT, resolveProtocol  } from './lib/nft'\nimport { Metadata } from './lib/metadata'\nimport { SessionWallet } from 'algorand-session-wallet'\nimport {useParams} from 'react-router-dom'\nimport { getAddrUrl, getAsaUrl } from './lib/config'\nimport { validateArc3 } from './lib/validator'\nimport {MediaDisplay} from './MediaDisplay'\n\nimport SyntaxHighlighter from 'react-syntax-highlighter'\nimport { docco } from  'react-syntax-highlighter/dist/esm/styles/hljs'\n\nexport type NFTViewerProps = {\n    activeConf: number\n    sw: SessionWallet\n}\n\nexport function NFTViewer(props: NFTViewerProps) {\n    const {assetId} = useParams()\n\n    const [nft, setNFT] = React.useState(new NFT(new Metadata()))\n    const [loaded, setLoaded] = React.useState(false)\n\n    React.useEffect(()=>{\n        setLoaded(false)\n        let subscribed = true\n        NFT.fromAssetId(props.activeConf, assetId).then((nft)=>{\n            if(!subscribed) return\n            setNFT(nft)\n            setLoaded(true)\n        })\n\n        return ()=>{ subscribed = false }\n    }, [assetId, props.activeConf])\n\n    let media = <div></div>\n    let meta = <div></div>\n\n    if(loaded){\n        console.log(nft)\n        media = <MediaDisplay mimeType={nft.metadata.mimeType(false)} mediaSrc={nft.mediaURL(props.activeConf, false)} />\n\n        const mdProps = nft.metadata && nft.metadata[\"_raw\"] !== undefined?(\n            <div className='raw-metadata'>\n                <SyntaxHighlighter language='json' style={docco} wrapLongLines={true}  >\n                    {nft.metadata.toString(true)}\n                </SyntaxHighlighter>\n            </div>\n        ):<p>No metadata</p>\n\n        const arc3Invalids = validateArc3(nft).map(test=>{\n            if(test.pass)\n                return (<li key={test.name} >  <Icon icon='tick' intent='success' /> <b>{test.name}</b></li>)\n\n            return (<li key={test.name} > <Icon icon='cross' intent='danger' /> <b>{test.name}</b> </li>)\n        })\n\n        meta = (\n        <div>\n            <h5>Token Parameters</h5>\n            <div className='content'>\n                <table>\n                    <tbody>\n                        <tr><td><b>ASA id: </b></td><td><a rel=\"noreferrer\" target=\"_blank\" href={getAsaUrl(props.activeConf, nft.token.id)} >{nft.token.id}</a></td></tr>\n                        <tr><td><b>Name:</b></td><td>{nft.token.name}</td></tr>\n                        <tr><td><b>Unit Name:</b></td><td>{nft.token.unitName}</td></tr>\n                        <tr><td><b>Total:</b></td><td>{nft.token.total}</td></tr>\n                        <tr><td><b>Decimals:</b></td><td>{nft.token.decimals}</td></tr>\n                        <tr><td><b>URL:     </b></td><td><a rel=\"noreferrer\" target=\"_blank\" href={resolveProtocol(props.activeConf, nft.token.url, nft.token.reserve)} >{nft.token.url}</a></td></tr>\n                        <tr><td><b>Creator: </b></td><td><a rel=\"noreferrer\" target=\"_blank\" href={getAddrUrl(props.activeConf, nft.token.creator)}  >{nft.token.creator}</a></td></tr>\n                        <tr><td><b>Manager: </b></td><td><a rel=\"noreferrer\" target=\"_blank\" href={getAddrUrl(props.activeConf, nft.token.manager)}  >{nft.token.manager}</a></td></tr>\n                        <tr><td><b>Reserve: </b></td><td><a rel=\"noreferrer\" target=\"_blank\" href={getAddrUrl(props.activeConf, nft.token.reserve)}  >{nft.token.reserve}</a></td></tr>\n                        <tr><td><b>Freeze:  </b></td><td><a rel=\"noreferrer\" target=\"_blank\" href={getAddrUrl(props.activeConf, nft.token.freeze) }  >{nft.token.freeze }</a></td></tr>\n                        <tr><td><b>Clawback:</b></td><td><a rel=\"noreferrer\" target=\"_blank\" href={getAddrUrl(props.activeConf, nft.token.clawback)} >{nft.token.clawback}</a></td></tr>\n                        <tr><td><b>Metadata Hash: </b></td><td>{nft.token.metadataHash}</td></tr>\n                        <tr><td><b>Default Frozen: </b></td><td>{nft.token.defaultFrozen?\"Yes\":\"No\"}</td></tr>\n                    </tbody>\n                </table>\n            </div>\n            <hr/>\n            <h5>Metadata</h5>\n            <div className='content'>\n                {mdProps}\n            </div>\n            <hr/>\n            <h5>ARC3 tests:</h5>\n            <div className='content'>\n                <ul>\n                    {arc3Invalids}\n                </ul>\n            </div>\n        </div>\n        )\n    }\n\n    return (\n        <div className='container'>\n            <Card elevation={Elevation.THREE} >\n                <div className='container'>\n                    <div className='content content-piece'>\n                        {media}\n                    </div>\n                    <div className='content-info'>\n                        {meta}\n                    </div>\n                </div>\n            </Card>\n        </div>\n    )\n}\n","import * as React from 'react'\nimport { Elevation, Card, AnchorButton } from \"@blueprintjs/core\"\nimport { SessionWallet } from 'algorand-session-wallet'\nimport {useParams} from 'react-router-dom'\nimport { conf } from './lib/config'\nimport {getCollection} from './lib/algorand' \nimport { validArc3 } from './lib/validator'\nimport {NFT} from './lib/nft'\nimport { MediaDisplay } from './MediaDisplay'\n\nexport type CollectionProps = {\n    activeConf: number\n    sw: SessionWallet\n}\n\nexport function Collection(props: CollectionProps) {\n    const {address} = useParams()\n\n    const [collection, setCollection] = React.useState([])\n    const [loaded, setLoaded] = React.useState(false)\n\n    React.useEffect(()=>{\n        setLoaded(false)\n        console.log(address)\n        getCollection(props.activeConf, address).then((collection)=>{\n            setCollection(collection)\n            setLoaded(true)\n        })\n\n    }, [address, props.activeConf])\n\n    let nfts = [<h3 key='looking'>Checking for NFTs...</h3>]\n\n    if(loaded ){\n        if(collection.length>0){\n            nfts = collection.filter((nft: NFT)=>{\n                return nft.id() !== 0\n            }).map((nft: NFT)=>{\n                const icon = validArc3(nft)?\"confirm\":\"circle\"\n                return (\n                <Card className='content-collection-item' key={nft.id()} elevation={Elevation.TWO}>\n                    <MediaDisplay mediaSrc={nft.mediaURL(props.activeConf, true)} mimeType={nft.metadata.mimeType(true)} />\n                    <AnchorButton icon={icon} minimal={true} href={'/nft/'+nft.id()}><b>{nft.name()}</b></AnchorButton>\n                </Card>\n                )\n            })\n        }else{\n            nfts = [<h3 key='none'>You dont have any ARC3 compliant NFTs on {conf[props.activeConf].network}, <a href='/mint'>Mint one?</a></h3>]\n        }\n    }\n    return (\n    <div className='container'>\n        <div className='content content-collection'>\n            {nfts}\n        </div>\n    </div>\n    )\n}","import { HTMLSelect } from '@blueprintjs/core'\nimport React from 'react'\nimport {conf} from './lib/config'\n\ninterface NetworkSelectorProps {\n    activeConf: number\n    selectNetwork(network: number)\n}\n\nexport function NetworkSelector(props: NetworkSelectorProps){\n\n    function handleSelectNetwork(e){\n        props.selectNetwork(parseInt(e.target.value))\n    }\n\n    const network_list = conf.map((cfg, idx) => {\n        return (<option value={idx} key={idx}> {cfg.network} </option>)\n    })\n\n    return (\n        <div>\n            <HTMLSelect \n                onChange={handleSelectNetwork} \n                minimal={true} \n                defaultValue={props.activeConf} >\n                {network_list}\n            </HTMLSelect>\n        </div>\n    )\n}","import { AnchorButton, Alignment, Navbar } from '@blueprintjs/core';\nimport { SessionWallet } from 'algorand-session-wallet';\nimport React from 'react';\nimport {Minter} from './Minter';\nimport AlgorandWalletConnector from './AlgorandWalletConnector'\nimport {NFTViewer} from './NFTViewer'\nimport {Collection} from './Collection'\nimport { conf, sessionGetActiveConf, sessionSetActiveConf } from './lib/config';\nimport {NetworkSelector} from './NetworkSelector'\n\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n} from 'react-router-dom'\n\n\ntype AppProps = {\n  history: History,\n  location: Location,\n}\n\nfunction App(props: AppProps) {\n\n  const network = new URLSearchParams(props.location.search).get('network');\n  if (network) {\n    const idx = conf.findIndex(cfg => cfg.network === network);\n    if(idx > -1) {\n      sessionSetActiveConf(idx);\n    }\n  }\n\n  const [activeConf, setActiveConf] = React.useState(sessionGetActiveConf())\n\n  const sw = new SessionWallet(conf[activeConf].network)\n\n\n  const [sessionWallet, setSessionWallet] =  React.useState(sw)\n  const [accts, setAccounts] = React.useState(sw.accountList())\n  const [connected, setConnected] = React.useState(sw.connected())\n\n  function updateWallet(sw: SessionWallet){ \n    setSessionWallet(sw)\n    setAccounts(sw.accountList())\n    setConnected(sw.connected())\n  }\n\n  function selectNetwork(idx: number){ \n    sessionSetActiveConf(idx)\n    setActiveConf(idx) \n  }\n\n  let collectionLink = <div></div>\n  if(connected){\n    collectionLink = <AnchorButton minimal={true} icon='folder-open' href={'/collection/'+sw.getDefaultAccount()} text='Collection' />\n  }\n  return (\n    <Router>\n      <div className=\"App\">\n        <Navbar>\n        <Navbar.Group align={Alignment.LEFT}>\n          <Navbar.Heading>ARC3.xyz</Navbar.Heading>\n          <Navbar.Divider />\n          <AnchorButton minimal={true} icon='git-branch' href='https://github.com/barnjamin/arc3.xyz' text='Github' />\n          <AnchorButton minimal={true} icon='clean' href='/mint' text='Mint' />\n          {collectionLink}\n        </Navbar.Group>\n        <Navbar.Group  align={Alignment.RIGHT}>\n          <NetworkSelector activeConf={activeConf} selectNetwork={selectNetwork} />\n\n          <AlgorandWalletConnector  \n            darkMode={false}\n            sessionWallet={sessionWallet}\n            accts={accts}\n            connected={connected} \n            updateWallet={updateWallet}\n          />\n\n        </Navbar.Group>\n        </Navbar>\n        <Switch>\n          <Route exact path=\"/\" children={<Minter  activeConf={activeConf} sw={sessionWallet}></Minter>} />\n          <Route exact path=\"/mint\" children={ <Minter  activeConf={activeConf} sw={sessionWallet}></Minter> }/>\n          <Route path=\"/nft/:assetId\" children={ <NFTViewer activeConf={activeConf}  sw={sessionWallet} /> }/>\n          <Route path=\"/collection/:address\" children={ <Collection  activeConf={activeConf} sw={sessionWallet} /> }/>\n        </Switch>\n      </div>\n    </Router>\n  );\n\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nimport {createBrowserHistory} from \"history\"\n\nconst history = createBrowserHistory();\n\nReactDOM.render(\n  <React.StrictMode>\n    <App history={history} location={window.location} />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}